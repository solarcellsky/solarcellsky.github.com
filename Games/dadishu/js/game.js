/**
 * Hilo 1.0.0
 * Copyright 2014 hilojs.com
 * Licensed under the MIT License
 */

!function(a){function b(a){var b,c,d=/\/?[^/]+\.(\w+)(\?\S+)?$/i;return(b=a.match(d))&&(c=b[1].toLowerCase()),c||null}var c=function(){var b=a,d=document,e=d.documentElement,f=0;return{getUid:function(a){var b=++f;if(a){var c=a.charCodeAt(a.length-1);return c>=48&&57>=c&&(a+="_"),a+b}return b},viewToString:function(a){for(var b,c=a;c;)b=b?c.id+"."+b:c.id,c=c.parent;return b},copy:function(a,b,c){for(var d in b)(!c||a.hasOwnProperty(d)||void 0!==a[d])&&(a[d]=b[d]);return a},browser:function(){var a=navigator.userAgent,c={iphone:/iphone/i.test(a),ipad:/ipad/i.test(a),ipod:/ipod/i.test(a),ios:/iphone|ipad|ipod/i.test(a),android:/android/i.test(a),webkit:/webkit/i.test(a),chrome:/chrome/i.test(a),safari:/safari/i.test(a),firefox:/firefox/i.test(a),ie:/msie/i.test(a),opera:/opera/i.test(a),supportTouch:"ontouchstart"in b,supportCanvas:null!=d.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in b,supportDeviceMotion:"ondevicemotion"in b};try{var f="hilo";localStorage.setItem(f,f),localStorage.removeItem(f),c.supportStorage=!0}catch(g){}var h=c.jsVendor=c.webkit?"webkit":c.firefox?"Moz":c.opera?"O":c.ie?"ms":"",i=c.cssVendor="-"+h+"-",j=d.createElement("div"),k=j.style,l=void 0!=k[h+"Transform"],m=void 0!=k[h+"Perspective"];return m&&(j.id="test3d",k=d.createElement("style"),k.textContent="@media ("+i+"transform-3d){#test3d{height:3px}}",d.head.appendChild(k),e.appendChild(j),m=3==j.offsetHeight,d.head.removeChild(k),e.removeChild(j)),c.supportTransform=l,c.supportTransform3D=m,c}(),event:function(){var a="ontouchstart"in b;return{POINTER_START:a?"touchstart":"mousedown",POINTER_MOVE:a?"touchmove":"mousemove",POINTER_END:a?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(a){try{var c=a.getBoundingClientRect()}catch(d){c={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var f=(b.pageXOffset||e.scrollLeft)-(e.clientLeft||0)||0,g=(b.pageYOffset||e.scrollTop)-(e.clientTop||0)||0,h=b.getComputedStyle?getComputedStyle(a):a.currentStyle,i=parseInt,j=i(h.paddingLeft)+i(h.borderLeftWidth)||0,k=i(h.paddingTop)+i(h.borderTopWidth)||0,l=i(h.paddingRight)+i(h.borderRightWidth)||0,m=i(h.paddingBottom)+i(h.borderBottomWidth)||0,n=c.top||0,o=c.left||0;return{left:o+f+j,top:n+g+k,width:c.right-l-o-j,height:c.bottom-m-n-k}},createElement:function(a,b){var c,e,f,g=d.createElement(a);for(c in b)if(e=b[c],"style"===c)for(f in e)g.style[f]=e[f];else g[c]=e;return g},getElement:function(a){return d.getElementById(a)},setElementStyleByView:function(a){var b=a.drawable,d=b.domElement.style,e=a._stateCache||(a._stateCache={}),f=c.browser.jsVendor,g="px",h=!1;if(this.cacheStateIfChanged(a,["visible"],e)&&(d.display=a.visible?"":"none"),this.cacheStateIfChanged(a,["alpha"],e)&&(d.opacity=a.alpha),a.visible&&!(a.alpha<=0)){this.cacheStateIfChanged(a,["width"],e)&&(d.width=a.width+g),this.cacheStateIfChanged(a,["height"],e)&&(d.height=a.height+g),this.cacheStateIfChanged(a,["depth"],e)&&(d.zIndex=a.depth+1),(h=this.cacheStateIfChanged(a,["pivotX","pivotY"],e))&&(d[f+"TransformOrigin"]=a.pivotX+g+" "+a.pivotY+g),(this.cacheStateIfChanged(a,["x","y","rotation","scaleX","scaleY"],e)||h)&&(d[f+"Transform"]=this.getTransformCSS(a)),this.cacheStateIfChanged(a,["background"],e)&&(d.backgroundColor=a.background),d.pointerEvents||(d.pointerEvents="none");var i=b.image;if(i){var j=i.src;j!==e.image&&(e.image=j,d.backgroundImage="url("+j+")");var k=b.rect;if(k){var l=k[0],m=k[1];l!==e.sx&&(e.sx=l,d.backgroundPositionX=-l+g),m!==e.sy&&(e.sy=m,d.backgroundPositionY=-m+g)}}var n=a.mask;if(n){var o=n.drawable.domElement.style.backgroundImage;o!==e.maskImage&&(e.maskImage=o,d[f+"MaskImage"]=o,d[f+"MaskRepeat"]="no-repeat");var p=n.x,q=n.y;(p!==e.maskX||q!==e.maskY)&&(e.maskX=p,e.maskY=q,d[f+"MaskPosition"]=p+g+" "+q+g)}}},cacheStateIfChanged:function(a,b,c){var d,e,f,g,h=!1;for(d=0,e=b.length;e>d;d++)f=b[d],g=a[f],g!=c[f]&&(c[f]=g,h=!0);return h},getTransformCSS:function(a){var b=this.browser.supportTransform3D,c=b?"3d":"";return"translate"+c+"("+(a.x-a.pivotX)+"px, "+(a.y-a.pivotY)+(b?"px, 0px)":"px)")+"rotate"+c+(b?"(0, 0, 1, ":"(")+a.rotation+"deg)scale"+c+"("+a.scaleX+", "+a.scaleY+(b?", 1)":")")}}}(),d=function(){var a=function(a){a=a||{};var c=a.hasOwnProperty("constructor")?a.constructor:function(){};return b.call(c,a),c},b=function(a){var b,d,f={};for(b in a)d=a[b],c.hasOwnProperty(b)?c[b].call(this,d):f[b]=d;e(this.prototype,f)},c={Extends:function(a){var b=this.prototype,c=d(a.prototype);e(this,a),e(c,b),c.constructor=this,this.prototype=c,this.superclass=a.prototype},Mixes:function(a){a instanceof Array||(a=[a]);for(var b,c=this.prototype;b=a.shift();)e(c,b.prototype||b)},Statics:function(a){e(this,a)}},d=function(){if(Object.__proto__)return function(a){return{__proto__:a}};var a=function(){};return function(b){return a.prototype=b,new a}}(),e=function(a){for(var b=1,c=arguments.length;c>b;b++){var d,e=arguments[b];for(var f in e){var h=e[f];!h||"object"!=typeof h||void 0===h.value&&"function"!=typeof h.get&&"function"!=typeof h.set?a[f]=h:(d=d||{},d[f]=h)}d&&g(a,d)}return a};try{var f=Object.defineProperty,g=Object.defineProperties;f({},"$",{value:0})}catch(h){"__defineGetter__"in Object&&(f=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},g=function(a,b){for(var c in b)b.hasOwnProperty(c)&&f(a,c,b[c]);return a})}return{create:a,mix:e}}(),e={_listeners:null,on:function(a,b,c){for(var d=this._listeners=this._listeners||{},e=d[a]=d[a]||[],f=0,g=e.length;g>f;f++){var h=e[f];if(h.listener===b)return}return e.push({listener:b,once:c}),this},off:function(a,b){if(0==arguments.length)return this._listeners=null,this;var c=this._listeners&&this._listeners[a];if(c){if(1==arguments.length)return delete this._listeners[a],this;for(var d=0,e=c.length;e>d;d++){var f=c[d];if(f.listener===b){c.splice(d,1),0===c.length&&delete this._listeners[a];break}}}return this},fire:function(a,b){var c,d;"string"==typeof a?d=a:(c=a,d=a.type);var e=this._listeners;if(!e)return!1;var g=e[d];if(g){if(g=g.slice(0),c=c||new f(d,this,b),c._stopped)return!1;for(var h=0;h<g.length;h++){var i=g[h];i.listener.call(this,c),i.once&&g.splice(h--,1)}return 0==g.length&&delete e[d],!0}return!1}},f=d.create({constructor:function(a,b,c){this.type=a,this.target=b,this.detail=c,this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}}),g=a.Event;if(g){var h=g.prototype,i=h.stopImmediatePropagation;h.stopImmediatePropagation=function(){i&&i.call(this),this._stopped=!0}}var j=d.create({constructor:function(a){a=a||{},c.copy(this,a,!0)},canvas:null,stage:null,startDraw:function(){},draw:function(){},endDraw:function(){},transform:function(){},hide:function(){},remove:function(){},clear:function(){},resize:function(){}}),k=d.create({Extends:j,constructor:function(a){k.superclass.constructor.call(this,a),this.context=this.canvas.getContext("2d")},context:null,startDraw:function(a){return a.visible&&a.alpha>0?(a===this.stage&&this.context.clearRect(0,0,a.width,a.height),this.context.save(),!0):!1},draw:function(a){var b=this.context,c=a.width,d=a.height,e=a.background;e&&(b.fillStyle=e,b.fillRect(0,0,c,d));var f=a.drawable,g=f&&f.image;if(g){var h=f.rect,i=h[2],j=h[3],k=h[4],l=h[5];c||d||(c=a.width=i,d=a.height=j),(k||l)&&b.translate(k-.5*i,l-.5*j),b.drawImage(g,h[0],h[1],i,j,0,0,c,d)}},endDraw:function(){this.context.restore()},transform:function(a){var b=a.drawable;if(b&&b.domElement)return void c.setElementStyleByView(a);var d=this.context,e=a.scaleX,f=a.scaleY;if(a===this.stage){var g=this.canvas.style,h=a._scaleX,i=a._scaleY;(!h&&1!=e||h&&h!=e)&&(a._scaleX=e,g.width=e*a.width+"px"),(!i&&1!=f||i&&i!=f)&&(a._scaleY=f,g.height=f*a.height+"px")}else{var j=a.x,k=a.y,l=a.pivotX,m=a.pivotY,n=a.rotation%360,o=a.mask;o&&(o._render(this),d.clip());var p=a.align;if(p)if("function"==typeof p)a.align();else{var q=a.parent;if(q){var r=a.width,s=a.height,t=q.width,u=q.height;switch(p){case"TL":j=0,k=0;break;case"T":j=t-r>>1,k=0;break;case"TR":j=t-r,k=0;break;case"L":j=0,k=u-s>>1;break;case"C":j=t-r>>1,k=u-s>>1;break;case"R":j=t-r,k=u-s>>1;break;case"BL":j=0,k=u-s;break;case"B":j=t-r>>1,k=u-s;break;case"BR":j=t-r,k=u-s}}}(0!=j||0!=k)&&d.translate(j,k),0!=n&&d.rotate(n*Math.PI/180),(1!=e||1!=f)&&d.scale(e,f),(0!=l||0!=m)&&d.translate(-l,-m)}a.alpha>0&&(d.globalAlpha*=a.alpha)},remove:function(a){var b=a.drawable,c=b&&b.domElement;if(c){var d=c.parentNode;d&&d.removeChild(c)}},clear:function(a,b,c,d){this.context.clearRect(a,b,c,d)},resize:function(a,b){this.canvas.width=a,this.canvas.height=b}}),l=function(){function a(a,b){var d=a.tagName||"div",e=b.image,f=a.width||e&&e.width,g=a.height||e&&e.height,h=c.createElement(d),i=h.style;if(a.id&&(h.id=a.id),i.position="absolute",i.left=(a.left||0)+"px",i.top=(a.top||0)+"px",i.width=f+"px",i.height=g+"px","canvas"==d){if(h.width=f,h.height=g,e){var j=h.getContext("2d"),k=b.rect||[0,0,f,g];j.drawImage(e,k[0],k[1],k[2],k[3],a.x||0,a.y||0,a.width||k[2],a.height||k[3])}}else if(i.opacity=void 0!=a.alpha?a.alpha:1,(a===this.stage||a.clipChildren)&&(i.overflow="hidden"),e&&e.src){i.backgroundImage="url("+e.src+")";var l=a.rectX||0,m=a.rectY||0;i.backgroundPosition=-l+"px "+-m+"px"}return h}return d.create({Extends:j,constructor:function(a){l.superclass.constructor.call(this,a)},startDraw:function(b){var c=b.drawable=b.drawable||new n;return c.domElement=c.domElement||a(b,c),!0},draw:function(a){var b=a.parent,c=a.drawable.domElement,d=c.parentNode;if(b){var e=b.drawable.domElement;e!=d&&e.appendChild(c)}else a!==this.stage||d||(c.style.overflow="hidden",this.canvas.appendChild(c))},transform:function(a){if(c.setElementStyleByView(a),a===this.stage){var b=this.canvas.style,d=a._scaleX,e=a._scaleY,f=a.scaleX,g=a.scaleY;(!d&&1!=f||d&&d!=f)&&(a._scaleX=f,b.width=f*a.width+"px"),(!e&&1!=g||e&&e!=g)&&(a._scaleY=g,b.height=g*a.height+"px")}},remove:function(a){var b=a.drawable,c=b&&b.domElement;if(c){var d=c.parentNode;d&&d.removeChild(c)}},hide:function(a){var b=a.drawable&&a.drawable.domElement;b&&(b.style.display="none")},resize:function(a,b){var c=this.canvas.style;c.width=a+"px",c.height=b+"px","absolute"!=c.position&&(c.position="relative")}})}(),m=d.create({constructor:function(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f},concat:function(a){var b=arguments,c=this.a,d=this.b,e=this.c,f=this.d,g=this.tx,h=this.ty;if(b.length>=6)var i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5];else i=a.a,j=a.b,k=a.c,l=a.d,m=a.tx,n=a.ty;return this.a=c*i+d*k,this.b=c*j+d*l,this.c=e*i+f*k,this.d=e*j+f*l,this.tx=g*i+h*k+m,this.ty=g*j+h*l+n,this},rotate:function(a){var b=Math.sin(a),c=Math.cos(a),d=this.a,e=this.b,f=this.c,g=this.d,h=this.tx,i=this.ty;return this.a=d*c-e*b,this.b=d*b+e*c,this.c=f*c-g*b,this.d=f*b+g*c,this.tx=h*c-i*b,this.ty=h*b+i*c,this},scale:function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},translate:function(a,b){return this.tx+=a,this.ty+=b,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},transformPoint:function(a,b,c){var d=a.x*this.a+a.y*this.c+this.tx,e=a.x*this.b+a.y*this.d+this.ty;return b&&(d=d+.5>>0,e=e+.5>>0),c?{x:d,y:e}:(a.x=d,a.y=e,a)}}),n=d.create({constructor:function(a){this.init(a)},image:null,rect:null,init:function(a){var b=this,d=b.image;n.isDrawable(a)?b.image=a:c.copy(b,a,!0);var e=b.image;if("string"==typeof e){if(!d||e!==d.getAttribute("src")){b.image=null;var f=new Image;return f.onload=function(){f.onload=null,b.init(f)},void(f.src=e)}e=b.image=d}e&&!b.rect&&(b.rect=[0,0,e.width,e.height])},Statics:{isDrawable:function(a){if(!a||!a.tagName)return!1;var b=a.tagName.toLowerCase();return"img"===b||"canvas"===b||"video"===b}}}),o=function(){function a(a,b,c){for(var d,e,f,g,h=0,i=!1,j=0,k=c.length;k>j;j++){var l=c[j],m=c[(j+1)%k];if(l.y==m.y&&b==l.y&&(l.x>m.x?(d=m.x,e=l.x):(d=l.x,e=m.x),a>=d&&e>=a))i=!0;else if(l.y>m.y?(f=m.y,g=l.y):(f=l.y,g=m.y),!(f>b||b>g)){var n=(b-l.y)*(m.x-l.x)/(m.y-l.y)+l.x;if(n>a?h++:n==a&&(i=!0),l.x>a&&l.y==b){var o=c[(k+j-1)%k];(o.y<b&&m.y>b||o.y>b&&m.y<b)&&h++}}}return i||h%2==1}function b(a,b){var c=f(a,b,{overlap:-1/0,normal:{x:0,y:0}});return c?f(b,a,c):!1}function f(a,b,c){for(var d,e,f,g,h,i,j,k,l,m=a.length,n=b.length,o={x:0,y:0},p=0;m>p;p++){d=a[p],e=a[m-1>p?p+1:0],o.x=d.y-e.y,o.y=e.x-d.x,f=Math.sqrt(o.x*o.x+o.y*o.y),o.x/=f,o.y/=f,g=h=a[0].x*o.x+a[0].y*o.y;for(var q=1;m>q;q++)k=a[q].x*o.x+a[q].y*o.y,k>h?h=k:g>k&&(g=k);for(i=j=b[0].x*o.x+b[0].y*o.y,q=1;n>q;q++)k=b[q].x*o.x+b[q].y*o.y,k>j?j=k:i>k&&(i=k);if(i>g?(l=i-h,o.x=-o.x,o.y=-o.y):l=g-j,l>=0)return!1;l>c.overlap&&(c.overlap=l,c.normal.x=o.x,c.normal.y=o.y)}return c}return d.create({Mixes:e,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("View"),c.copy(this,a,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,mask:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var a,b=this;a=b.parent;)b=a;return b.canvas?b:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(a,b){return"number"==typeof b?a.addChildAt(this,b):a.addChild(this),this},removeFromParent:function(){var a=this.parent;return a&&a.removeChild(this),this},getBounds:function(){for(var a,b,c,d,e,f,g,h=this.width,i=this.height,j=this.getConcatenatedMatrix(),k=this.boundsArea||[{x:0,y:0},{x:h,y:0},{x:h,y:i},{x:0,y:i}],l=[],m=0,n=k.length;n>m;m++)a=j.transformPoint(k[m],!0,!0),b=a.x,c=a.y,0==m?(d=e=b,f=g=c):(d>b?d=b:b>e&&(e=b),f>c?f=c:c>g&&(g=c)),l[m]=a;return l.x=d,l.y=f,l.width=e-d,l.height=g-f,l},getConcatenatedMatrix:function(a){for(var b=new m(1,0,0,1,0,0),c=this;c!=a&&c.parent;c=c.parent){var d=1,e=0,f=c.rotation%360,g=c.pivotX,h=c.pivotY,i=c.scaleX,j=c.scaleY;if(f){var k=f*Math.PI/180;d=Math.cos(k),e=Math.sin(k)}0!=g&&(b.tx-=g),0!=h&&(b.ty-=h),b.concat(d*i,e*i,-e*j,d*j,c.x,c.y)}return b},hitTestPoint:function(b,c,d){var e=this.getBounds(),f=b>=e.x&&b<=e.x+e.width&&c>=e.y&&c<=e.y+e.height;return f&&d&&(f=a(b,c,e)),f},hitTestObject:function(a,c){var d=this.getBounds(),e=a.getBounds(),f=d.x<=e.x+e.width&&e.x<=d.x+d.width&&d.y<=e.y+e.height&&e.y<=d.y+d.height;return f&&c&&(f=b(d,e)),!!f},_render:function(a,b){this.onUpdate&&this.onUpdate(b)===!1||!a.startDraw(this)||(a.transform(this),this.render(a,b),a.endDraw(this))},_fireMouseEvent:function(a){if(a.eventCurrentTarget=this,this.fire(a),"mousemove"==a.type){if(!this.__mouseOver){this.__mouseOver=!0;var b=c.copy({},a);b.type="mouseover",this.fire(b)}}else"mouseout"==a.type&&(this.__mouseOver=!1);var d=this.parent;a._stopped||a._stopPropagationed||!d||("mouseout"==a.type||"touchout"==a.type?d.hitTestPoint(a.stageX,a.stageY,!0)||d._fireMouseEvent(a):d._fireMouseEvent(a))},onUpdate:null,render:function(a){a.draw(this)},toString:function(){return c.viewToString(this)}})}(),p=d.create({Extends:o,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("Container"),p.superclass.constructor.call(this,a),this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(a,b){var c=this.children,d=c.length,e=a.parent;b=0>b?0:b>d?d:b;var f=this.getChildIndex(a);if(f==b)return this;if(f>=0?(c.splice(f,1),b=b==d?d-1:b):e&&e.removeChild(a),c.splice(b,0,a),0>f)this._updateChildren(b);else{var g=b>f?f:b,h=b>f?b:f;this._updateChildren(g,h+1)}return this},addChild:function(){for(var a=this.children.length,b=arguments,c=0,d=b.length;d>c;c++)this.addChildAt(b[c],a+c);return this},removeChildAt:function(a){var b=this.children;if(0>a||a>=b.length)return null;var c=b[a];if(c){if(!c.__renderer)for(var d=c;d=d.parent;){if(d.renderer){c.__renderer=d.renderer;break}if(d.__renderer){c.__renderer=d.__renderer;break}}c.__renderer&&c.__renderer.remove(c),c.parent=null,c.depth=-1}return b.splice(a,1),this._updateChildren(a),c},removeChild:function(a){return this.removeChildAt(this.getChildIndex(a))},removeChildById:function(a){for(var b,c=this.children,d=0,e=c.length;e>d;d++)if(b=c[d],b.id===a)return this.removeChildAt(d),b;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(a){var b=this.children;return 0>a||a>=b.length?null:b[a]},getChildById:function(a){for(var b,c=this.children,d=0,e=c.length;e>d;d++)if(b=c[d],b.id===a)return b;return null},getChildIndex:function(a){return this.children.indexOf(a)},setChildIndex:function(a,b){var c=this.children,d=c.indexOf(a);if(d>=0&&d!=b){var e=c.length;b=0>b?0:b>=e?e-1:b,c.splice(d,1),c.splice(b,0,a),this._updateChildren()}return this},swapChildren:function(a,b){var c=this.children,d=this.getChildIndex(a),e=this.getChildIndex(b);a.depth=e,c[e]=a,b.depth=d,c[d]=b},swapChildrenAt:function(a,b){var c=this.children,d=this.getChildAt(a),e=this.getChildAt(b);d.depth=b,c[b]=d,e.depth=a,c[a]=e},sortChildren:function(a){var b=a,c=this.children;if("string"==typeof b){var d=b;b=function(a,b){return b[d]-a[d]}}c.sort(b),this._updateChildren()},_updateChildren:function(a,b){for(var c,d=this.children,a=a||0,b=b||d.length,e=a;b>e;e++)c=d[e],c.depth=e+1,c.parent=this},contains:function(a){for(;a=a.parent;)if(a===this)return!0;return!1},getViewAtPoint:function(a,b,c,d,e){for(var f,g,h=d?[]:null,i=this.children,j=i.length-1;j>=0;j--)if(f=i[j],!(!f||!f.visible||f.alpha<=0||e&&!f.pointerEnabled))if(f.children&&f.children.length&&(!e||f.pointerChildren)&&(g=f.getViewAtPoint(a,b,c,d,e)),g){if(!d)return g;g.length&&(h=h.concat(g))}else if(f.hitTestPoint(a,b,c)){if(!d)return f;h.push(f)}return d&&h.length?h:null},render:function(a,b){p.superclass.render.call(this,a,b);var c,d,e,f=this.children.slice(0);for(c=0,d=f.length;d>c;c++)e=f[c],e.parent===this&&e._render(a,b)}}),q=d.create({Extends:p,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("Stage"),q.superclass.constructor.call(this,a),this._initRenderer(a);var b=this.width,d=this.height,e=this.updateViewport();a.width||(b=e&&e.width||320),a.height||(d=e&&e.height||480),this.resize(b,d,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(a){var b=this.canvas;"string"==typeof b&&(b=c.getElement(b));var d=a.container;"string"==typeof d&&(d=c.getElement(d)),b||(b=c.createElement("canvas",{style:{position:"absolute"}})),this.canvas=b,d&&d.appendChild(b);var e=b.getContext,f={canvas:b,stage:this};this.renderer=e?new k(f):new l(f)},addTo:function(a){var b=this.canvas;return b.parentNode!==a&&a.appendChild(b),this},tick:function(a){this.paused||this._render(this.renderer,a)},enableDOMEvent:function(a,b){for(var c=this,d=c.canvas,e="string"==typeof a?[a]:a,b=b!==!1,f=c._domListener||(c._domListener=function(a){c._onDOMEvent(a)}),g=0;g<e.length;g++){var a=e[g];b?d.addEventListener(a,f,!1):d.removeEventListener(a,f)}return c},_onDOMEvent:function(a){var b=a.type,d=a,e=0==b.indexOf("touch"),f=a;if(e){var g=a.touches,h=a.changedTouches;f=g&&g.length?g[0]:h&&h.length?h[0]:null}var i=f.pageX||f.clientX,j=f.pageY||f.clientY,k=this.viewport||this.updateViewport();d.stageX=i=(i-k.left)/this.scaleX,d.stageY=j=(j-k.top)/this.scaleY,d.stopPropagation=function(){this._stopPropagationed=!0};var l=this.getViewAtPoint(i,j,!0,!1,!0)||this,m=this.canvas,n=this._eventTarget,o="mouseout"===b;if(n&&(n!=l&&(!n.contains||!n.contains(l))||o)){var p="touchmove"===b?"touchout":"mousemove"===b||o||!l?"mouseout":null;if(p){var q=c.copy({},d);q.type=p,q.eventTarget=n,n._fireMouseEvent(q)}d.lastEventTarget=n,this._eventTarget=null}if(l&&l.pointerEnabled&&"mouseout"!==b&&(d.eventTarget=this._eventTarget=l,l._fireMouseEvent(d)),!e){var r=l&&l.pointerEnabled&&l.useHandCursor?"pointer":"";m.style.cursor=r}c.browser.android&&"touchmove"===b&&a.preventDefault()},updateViewport:function(){var a=this.canvas,b=null;return a.parentNode&&(b=this.viewport=c.getElementRect(a)),b},resize:function(a,b,c){(c||this.width!==a||this.height!==b)&&(this.width=a,this.height=b,this.renderer.resize(a,b),this.updateViewport())}}),r=d.create({Extends:o,constructor:function(a){if(a=a||{},this.id=this.id||a.id||c.getUid("Bitmap"),r.superclass.constructor.call(this,a),this.drawable=new n(a),!this.width||!this.height){var b=this.drawable.rect;b&&(this.width=b[2],this.height=b[3])}},setImage:function(a,b){return this.drawable.init({image:a,rect:b}),b&&(this.width=b[2],this.height=b[3]),this}}),s=d.create({Extends:o,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("Sprite"),s.superclass.constructor.call(this,a),this._frames=[],this._frameNames={},this.drawable=new n,a.frames&&this.addFrame(a.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(a,b){var c=null!=b?b:this._frames.length;if(a instanceof Array)for(var d=0,e=a.length;e>d;d++)this.setFrame(a[d],c+d);else this.setFrame(a,c);return this},setFrame:function(a,b){var c=this._frames,d=c.length;return b=0>b?0:b>d?d:b,c[b]=a,a.name&&(this._frameNames[a.name]=a),(0==b&&!this.width||!this.height)&&(this.width=a.rect[2],this.height=a.rect[3]),this},getFrame:function(a){if("number"==typeof a){var b=this._frames;return 0>a||a>=b.length?null:b[a]}return this._frameNames[a]},getFrameIndex:function(a){var b=this._frames,c=b.length,d=-1;if("number"==typeof a)d=a;else{var e="string"==typeof a?this._frameNames[a]:a;if(e)for(var f=0;c>f;f++)if(e===b[f]){d=f;break}}return d},play:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this},"goto":function(a,b){var c=this._frames.length,d=this.getFrameIndex(a);return this.currentFrame=0>d?0:d>=c?c-1:d,this.paused=b,this._firstRender=!0,this},_render:function(a,b){var c,d=this.currentFrame;if(this._firstRender?(c=d,this._firstRender=!1):c=this._nextFrame(b),c!=d){this.currentFrame=c;var e=this._frames[c].callback;e&&e.call(this)}this.onEnterFrame&&this.onEnterFrame(c),this.drawable.init(this._frames[c]),s.superclass._render.call(this,a,b)},_nextFrame:function(a){var b=this._frames,c=b.length,d=this.currentFrame,e=b[d],f=e.duration||this.interval,g=this._frameElapsed,h=0!=d||this.drawable?g+(this.timeBased?a:1):0;return g=this._frameElapsed=f>h?h:0,(e.stop||!this.loop&&d>=c-1)&&this.stop(),this.paused||0!=g||(null!=e.next?d=this.getFrameIndex(e.next):d>=c-1?d=0:this.drawable&&d++),d},setFrameCallback:function(a,b){return a=this.getFrame(a),a&&(a.callback=b),this},onEnterFrame:null}),t=d.create({Extends:o,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("DOMElement"),t.superclass.constructor.call(this,a),this.drawable=new n;var b=this.drawable.domElement=a.element||c.createElement("div");b.id=this.id},_render:function(a,b){this.onUpdate&&this.onUpdate(b)===!1||(a.transform(this),this.visible&&this.alpha>0&&this.render(a,b))},render:function(a){var b=a.canvas;if(b.getContext){var c,d=this.drawable.domElement,e=this.depth,f=b.nextSibling;if(d.parentNode)return;for(;f&&3!=f.nodeType&&(c=parseInt(f.style.zIndex)||0,!(0>=c||c>e));)f=f.nextSibling;b.parentNode.insertBefore(this.drawable.domElement,f)}else a.draw(this)}}),u=function(){var a=document.createElement("canvas"),b=a.getContext&&a.getContext("2d");return d.create({Extends:o,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("Graphics"),u.superclass.constructor.call(this,a),this._actions=[],this._cache=null},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(a,b,c,d,e,f){var g=this,h=g._addAction;return h.call(g,["lineWidth",g.lineWidth=a||1]),h.call(g,["strokeStyle",g.strokeStyle=b||"0"]),h.call(g,["lineAlpha",g.lineAlpha=c||1]),void 0!=d&&h.call(g,["lineCap",g.lineCap=d]),void 0!=e&&h.call(g,["lineJoin",g.lineJoin=e]),void 0!=f&&h.call(g,["miterLimit",g.miterLimit=f]),g.hasStroke=!0,g},beginFill:function(a,b){var c=this,d=c._addAction;return d.call(c,["fillStyle",c.fillStyle=a]),d.call(c,["fillAlpha",c.fillAlpha=b||1]),c.hasFill=!0,c},endFill:function(){var a=this,b=a._addAction;return a.hasStroke&&b.call(a,["stroke"]),a.hasFill&&b.call(a,["fill"]),a},beginLinearGradientFill:function(a,c,d,e,f,g){for(var h=this,i=b.createLinearGradient(a,c,d,e),j=0,k=f.length;k>j;j++)i.addColorStop(g[j],f[j]);return h.hasFill=!0,h._addAction(["fillStyle",h.fillStyle=i])},beginRadialGradientFill:function(a,c,d,e,f,g,h,i){for(var j=this,k=b.createRadialGradient(a,c,d,e,f,g),l=0,m=h.length;m>l;l++)k.addColorStop(i[l],h[l]);return j.hasFill=!0,j._addAction(["fillStyle",j.fillStyle=k])},beginBitmapFill:function(a,c){var d=this,e=b.createPattern(a,c||"");return d.hasFill=!0,d._addAction(["fillStyle",d.fillStyle=e])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},moveTo:function(a,b){return this._addAction(["moveTo",a,b])},lineTo:function(a,b){return this._addAction(["lineTo",a,b])},quadraticCurveTo:function(a,b,c,d){return this._addAction(["quadraticCurveTo",a,b,c,d])},bezierCurveTo:function(a,b,c,d,e,f){return this._addAction(["bezierCurveTo",a,b,c,d,e,f])},drawRect:function(a,b,c,d){return this._addAction(["rect",a,b,c,d])},drawRoundRectComplex:function(a,b,c,d,e,f,g,h){var i=this,j=i._addAction;return j.call(i,["moveTo",a+e,b]),j.call(i,["lineTo",a+c-f,b]),j.call(i,["arc",a+c-f,b+f,f,-Math.PI/2,0,!1]),j.call(i,["lineTo",a+c,b+d-g]),j.call(i,["arc",a+c-g,b+d-g,g,0,Math.PI/2,!1]),j.call(i,["lineTo",a+h,b+d]),j.call(i,["arc",a+h,b+d-h,h,Math.PI/2,Math.PI,!1]),j.call(i,["lineTo",a,b+e]),j.call(i,["arc",a+e,b+e,e,Math.PI,3*Math.PI/2,!1]),i},drawRoundRect:function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e)},drawCircle:function(a,b,c){return this._addAction(["arc",a+c,b+c,c,0,2*Math.PI,0])},drawEllipse:function(a,b,c,d){var e=this;if(c==d)return e.drawCircle(a,b,c);var f=e._addAction,g=c/2,h=d/2,i=.5522847498307933,j=i*g,k=i*h;return a+=g,b+=h,f.call(e,["moveTo",a+g,b]),f.call(e,["bezierCurveTo",a+g,b-k,a+j,b-h,a,b-h]),f.call(e,["bezierCurveTo",a-j,b-h,a-g,b-k,a-g,b]),f.call(e,["bezierCurveTo",a-g,b+k,a-j,b+h,a,b+h]),f.call(e,["bezierCurveTo",a+j,b+h,a+g,b+k,a+g,b]),e},drawSVGPath:function(a){var b=this,c=b._addAction,d=a.split(/,| (?=[a-zA-Z])/);c.call(b,["beginPath"]);for(var e=0,f=d.length;f>e;e++){var g=d[e],h=g[0].toUpperCase(),i=g.substring(1).split(/,| /);switch(0==i[0].length&&i.shift(),h){case"M":c.call(b,["moveTo",i[0],i[1]]);break;case"L":c.call(b,["lineTo",i[0],i[1]]);break;case"C":c.call(b,["bezierCurveTo",i[0],i[1],i[2],i[3],i[4],i[5]]);break;case"Z":c.call(b,["closePath"])}}return b},_draw:function(a){var b,c=this,d=c._actions,e=d.length;for(a.beginPath(),b=0;e>b;b++){var f=d[b],g=f[0],h=f.length>1?f.slice(1):null;"function"==typeof a[g]?a[g].apply(a,h):a[g]=f[1]}},render:function(a){var b=this,c=a.canvas;if(c.getContext)b._draw(a.context);else{var d=b.drawable;d.image||(d.image=b.toImage()),a.draw(b)}},cache:function(a){var b=this,d=b._cache;return d||(d=b._cache=c.createElement("canvas",{width:b.width,height:b.height}),b._draw(d.getContext("2d"))),a&&(d=b._cache=b.toImage()),d},uncache:function(){this._cache=null},toImage:function(a){var b=this,d=b._cache,e=b.width,f=b.height;if(d||(d=c.createElement("canvas",{width:e,height:f}),b._draw(d.getContext("2d"))),!(d instanceof HTMLImageElement)){var g=d.toDataURL(a||"image/png");d=new Image,d.src=g,d.width=e,d.height=f}return d},clear:function(){var a=this;return a._actions.length=0,a._cache=null,a.lineWidth=1,a.lineAlpha=1,a.lineCap=null,a.lineJoin=null,a.miterLimit=10,a.hasStroke=!1,a.strokeStyle="0",a.hasFill=!1,a.fillStyle="0",a.fillAlpha=1,a},_addAction:function(a){var b=this;return b._actions.push(a),b}})}(),v=d.create({Extends:o,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("Text"),v.superclass.constructor.call(this,a),a.font||(this.font="12px arial"),this._fontHeight=v.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,setFont:function(a){var b=this;return b.font!==a&&(b.font=a,b._fontHeight=v.measureFontHeight(a)),b},render:function(a){var b=this,c=a.canvas;if(c.getContext)b._draw(a.context);else{var d=b.drawable,e=d.domElement,f=e.style;f.font=b.font,f.textAlign=b.textAlign,f.color=b.color,f.width=b.width+"px",f.height=b.height+"px",f.lineHeight=b._fontHeight+b.lineSpacing+"px",e.innerHTML=b.text,a.draw(this)}},_draw:function(a){var b=this,c=b.text.toString();if(c){a.font=b.font,a.textAlign=b.textAlign,a.textBaseline="top";var d,e,f,g=c.split(/\r\n|\r|\n|<br(?:[ \/])*>/),h=0,i=0,j=b._fontHeight+b.lineSpacing,k=[];for(d=0,len=g.length;len>d;d++)if(e=g[d],f=a.measureText(e).width,f<=b.maxWidth)k.push({text:e,y:i}),f>h&&(h=f),i+=j;else{var l,m,n,o="",p=0;for(m=0,wlen=e.length;wlen>m;m++)n=e[m],l=a.measureText(o+n).width,l>b.maxWidth?(k.push({text:o,y:i}),p>h&&(h=p),i+=j,o=n):(p=l,o+=n),m==wlen-1&&(k.push({text:o,y:i}),o!==n&&l>h&&(h=l),i+=j)}b.textWidth=h,b.textHeight=i,b.width||(b.width=h),b.height||(b.height=i);var q=0;switch(b.textVAlign){case"middle":q=b.height-b.textHeight>>1;break;case"bottom":q=b.height-b.textHeight}var r=b.background;r&&(a.fillStyle=r,a.fillRect(0,0,b.width,b.height)),b.outline?a.strokeStyle=b.color:a.fillStyle=b.color;for(var d=0;d<k.length;d++){var e=k[d];b._drawTextLine(a,e.text,q+e.y)}}},_drawTextLine:function(a,b,c){var d=this,e=0,f=d.width;switch(d.textAlign){case"center":e=f>>1;break;case"right":case"end":e=f}d.outline?a.strokeText(b,e,c):a.fillText(b,e,c)},Statics:{measureFontHeight:function(a){var b,d=document.documentElement,e=c.createElement("div",{style:{font:a,position:"absolute"},innerHTML:"M"});return d.appendChild(e),b=e.offsetHeight,d.removeChild(e),b}}}),w=d.create({Extends:p,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("BitmapText"),w.superclass.constructor.call(this,a);var b=a.text+"";b&&(this.text="",this.setText(b)),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(a){var b=this,c=a.toString(),d=c.length;if(b.text!=c){b.text=c;var e,f,g,h,i=0,j=0,k=0;for(e=0;d>e;e++)f=c.charAt(e),g=b.glyphs[f],g&&(k=i+(i>0?b.letterSpacing:0),b.children[e]?(h=b.children[e],h.setImage(g.image,g.rect)):(h=b._createBitmap(g),b.addChild(h)),h.x=k,i=k+g.rect[2],j=Math.max(j,g.rect[3]));for(e=b.children.length-1;e>=d;e--)b._releaseBitmap(b.children[e]),b.children[e].removeFromParent();return b.width=i,b.height=j,this.setTextAlign(),b}},_createBitmap:function(a){var b;return w._pool.length?(b=w._pool.pop(),b.setImage(a.image,a.rect)):b=new r({image:a.image,rect:a.rect}),b},_releaseBitmap:function(a){w._pool.push(a)},setTextAlign:function(a){switch(this.textAlign=a||this.textAlign,this.textAlign){case"center":this.pivotX=.5*this.width;break;case"right":this.pivotX=this.width;break;case"left":default:this.pivotX=0}return this},hasGlyphs:function(a){var b=this.glyphs;if(!b)return!1;var c,a=a.toString(),d=a.length;for(c=0;d>c;c++)if(!b[a.charAt(c)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(a,b,c,d){var e=a.toString();c=c||e.length,d=d||1;for(var f=b.width/c,g=b.height/d,h={},i=0,j=a.length;j>i;i++)charStr=e.charAt(i),h[charStr]={image:b,rect:[f*(i%c),g*Math.floor(i/c),f,g]};return h}}}),x=d.create({Extends:o,constructor:function(a){a=a||{},this.id=this.id||a.id||c.getUid("Button"),x.superclass.constructor.call(this,a),this.drawable=new n(a),this.setState(x.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(a){return this.enabled!=a&&this.setState(a?x.UP:x.DISABLED),this
},setState:function(a){if(this.state!==a){this.state=a,this.pointerEnabled=this.enabled=a!==x.DISABLED;var b;switch(a){case x.UP:b=this.upState;break;case x.OVER:b=this.overState;break;case x.DOWN:b=this.downState;break;case x.DISABLED:b=this.disabledState}b&&(this.drawable.init(b),c.copy(this,b,!0))}return this},fire:function(a,b){if(this.enabled){var c="string"==typeof a?a:a.type;switch(c){case"mousedown":case"touchstart":case"touchmove":this.setState(x.DOWN);break;case"mouseover":this.setState(x.OVER);break;case"mouseup":this.overState?this.setState(x.OVER):this.upState&&this.setState(x.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(x.UP)}return x.superclass.fire.call(this,a,b)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}}),y=function(){function a(a){var b=a.frames;if(!b)return null;var c,d=[];if(b instanceof Array)for(var e=0,f=b.length;f>e;e++)c=b[e],d[e]={image:a.image,rect:c};else for(var g=b.frameWidth,h=b.frameHeight,i=a.width/g|0,j=a.height/h|0,k=b.numFrames||i*j,e=0;k>e;e++)d[e]={image:a.image,rect:[e%i*g,(e/i|0)*h,g,h]};return d}function b(a,b){var d=a.sprites;if(!d)return null;var f,g,h,i={};for(var j in d){if(f=d[j],e(f))g=c(b[f]);else if(f instanceof Array){g=[];for(var k=0,l=f.length;l>k;k++){var m,n=f[k];e(n)?h=c(b[n]):(m=n.rect,e(m)&&(m=b[n.rect]),h=c(m,n)),g[k]=h}}else{g=[];for(var k=f.from;k<=f.to;k++)g[k-f.from]=c(b[k],f[k])}i[j]=g}return i}function c(a,b){var c={image:a.image,rect:a.rect};return b&&(c.name=b.name||null,c.duration=b.duration||0,c.stop=!!b.stop,c.next=b.next||null),c}function e(a){return"number"==typeof a}return d.create({constructor:function(c){this._frames=a(c),this._sprites=b(c,this._frames)},_frames:null,_sprites:null,getFrame:function(a){var b=this._frames;return b&&b[a]},getSprite:function(a){var b=this._sprites;return b&&b[a]},Statics:{createSpriteFrames:function(a,b,c,d,e,f,g){if("[object Array]"===Object.prototype.toString.call(a)){for(var b=[],h=0,i=a.length;i>h;h++)b=b.concat(this.createSpriteFrames.apply(this,a[h]));return b}if("string"==typeof b){var j=b.split(",");b=[];for(var k=0,l=j.length;l>k;k++){var m=j[k].split("-");if(1==m.length)b.push(parseInt(m[0]));else for(var h=parseInt(m[0]),i=parseInt(m[1]);i>=h;h++)b.push(h)}}for(var n=Math.floor(c.width/d),h=0;h<b.length;h++){var o=b[h];b[h]={rect:[d*(o%n),e*Math.floor(o/n),d,e],image:c,duration:g}}return b[0].name=a,f?b[b.length-1].next=a:b[b.length-1].stop=!0,b}}})}(),z=d.create({constructor:function(a){this._targetFPS=a||30,this._interval=1e3/this._targetFPS,this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(b){if(!this._intervalId){this._lastTime=+new Date;var d=this,e=this._interval,f=a.requestAnimationFrame||a[c.browser.jsVendor+"RequestAnimationFrame"];if(b&&f)var g=function(){d._tick()},h=function(){d._intervalId=setTimeout(h,e),f(g)};else h=function(){d._intervalId=setTimeout(h,e),d._tick()};h()}},stop:function(){clearTimeout(this._intervalId),this._intervalId=null,this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var a=+new Date,b=a-this._lastTime,c=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=a-this._lastTime,this._lastTime=a;for(var d=0,e=c.length;e>d;d++)c[d].tick(b)}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(a){if(!a||"function"!=typeof a.tick)throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(a)},removeTick:function(a){var b=this._tickers,c=b.indexOf(a);c>=0&&b.splice(c,1)}}),A=Array.prototype,B=A.slice;A.indexOf=A.indexOf||function(a,b){b=b||0;var c,d=this.length;if(0==d||b>=d)return-1;for(0>b&&(b=d+b),c=b;d>c;c++)if(this[c]===a)return c;return-1};var C=Function.prototype;C.bind=C.bind||function(a){function b(){var e=d.concat(B.call(arguments));return c.apply(this instanceof b?this:a,e)}var c=this,d=B.call(arguments,1),e=function(){};return e.prototype=c.prototype,b.prototype=new e,b};var D={startDrag:function(a){function b(a){a.stopPropagation(),f(a),i.off(c.event.POINTER_START,b),i.fire("dragStart",j),i.__dragX=i.x-j.x,i.__dragY=i.y-j.y,h||(h=this.getStage()),h.on(c.event.POINTER_MOVE,e),document.addEventListener(c.event.POINTER_END,d)}function d(){document.removeEventListener(c.event.POINTER_END,d),h&&h.off(c.event.POINTER_MOVE,e),i.fire("dragEnd",j),i.on(c.event.POINTER_START,b)}function e(a){f(a),i.fire("dragMove",j);var b=j.x+i.__dragX,c=j.y+i.__dragY;i.x=Math.max(k,Math.min(m,b)),i.y=Math.max(l,Math.min(n,c))}function f(a){j.preX=j.x,j.preY=j.y,j.x=a.stageX,j.y=a.stageY}function g(){document.removeEventListener(c.event.POINTER_END,d),h&&h.off(c.event.POINTER_MOVE,e),i.off(c.event.POINTER_START,b)}var h,i=this,a=a||[-1/0,-1/0,1/0,1/0],j={x:0,y:0,preX:0,preY:0},k=a[0],l=a[1],m=1/0==a[2]?1/0:k+a[2],n=1/0==a[3]?1/0:l+a[3];i.on(c.event.POINTER_START,b),i.stopDrag=g},stopDrag:function(){}},E=function(){function a(){return+new Date}return d.create({constructor:function(a,b,c,d){var e=this;e.target=a,e._startTime=0,e._seekTime=0,e._pausedTime=0,e._pausedStartTime=0,e._reverseFlag=1,e._repeatCount=0,3==arguments.length&&(d=c,c=b,b=null);for(var f in d)e[f]=d[f];e.setProps(b,c),!d.duration&&d.time&&(e.duration=d.time||0,e.time=0)},target:null,duration:0,delay:0,paused:!1,loop:!1,reverse:!1,repeat:0,repeatDelay:0,ease:null,time:0,onStart:null,onUpdate:null,onComplete:null,setProps:function(a,b){var c=this,d=c.target,e=a||b,f=c._fromProps={},g=c._toProps={};a=a||d,b=b||d;for(var h in e)g[h]=b[h]||0,d[h]=f[h]=a[h]||0;return c},start:function(){var b=this;return b._startTime=a()+b.delay,b._seekTime=0,b._pausedTime=0,b.paused=!1,E.add(b),b},stop:function(){return E.remove(this),this},pause:function(){var b=this;return b.paused=!0,b._pausedStartTime=a(),b},resume:function(){var b=this;return b.paused=!1,b._pausedStartTime&&(b._pausedTime+=a()-b._pausedStartTime),b._pausedStartTime=0,b},seek:function(b,c){var d=this,e=a();return d._startTime=e,d._seekTime=b,d._pausedTime=0,void 0!==c&&(d.paused=c),d._update(e,!0),E.add(d),d},link:function(a){var b=this,c=a.delay,d=b._startTime;if("string"==typeof c){var e=0==c.indexOf("+"),f=0==c.indexOf("-");c=e||f?Number(c.substr(1))*(e?1:-1):Number(c)}return a.delay=c,a._startTime=e||f?d+b.duration+c:d+c,b._next=a,E.remove(a),b},_render:function(a){var b,c=this,d=c.target,e=c._fromProps;for(b in e)d[b]=e[b]+(c._toProps[b]-e[b])*a},_update:function(b,c){var d=this;if(!d.paused||c){var e=b-d._startTime-d._pausedTime+d._seekTime;if(!(0>e)){var f,g=e/d.duration,h=!1;g=0>=g?0:g>=1?1:d.ease?d.ease(g):g,d.reverse&&(d._reverseFlag<0&&(g=1-g),1e-7>g&&(d.repeat>0&&d._repeatCount++>=d.repeat||0==d.repeat&&!d.loop?h=!0:(d._startTime=a(),d._reverseFlag*=-1))),0==d.time&&(f=d.onStart)&&f.call(d,d),d.time=e,d._render(g),(f=d.onUpdate)&&f.call(d,g,d),g>=1&&(d.reverse?(d._startTime=a(),d._reverseFlag*=-1):d.loop||d.repeat>0&&d._repeatCount++<d.repeat?d._startTime=a()+d.repeatDelay:h=!0);var i=d._next;if(i&&i.time<=0){var j=i._startTime;j>0&&b>=j?(i._render(g),i.time=e,E.add(i)):h&&(0>j||j>b)&&i.start()}return h?((f=d.onComplete)&&f.call(d,d),!0):void 0}}},Statics:{_tweens:[],tick:function(){var b,c,d=E._tweens,e=d.length;for(c=0;e>c;c++)b=d[c],b&&b._update(a())&&(d.splice(c,1),c--);return E},add:function(a){var b=E._tweens;return-1==b.indexOf(a)&&b.push(a),E},remove:function(a){if(a instanceof Array){for(var b=0,c=a.length;c>b;b++)E.remove(a[b]);return E}var b,d=E._tweens;if(a instanceof E)b=d.indexOf(a),b>-1&&d.splice(b,1);else for(b=0;b<d.length;b++)d[b].target===a&&(d.splice(b,1),b--);return E},removeAll:function(){return E._tweens.length=0,E},fromTo:function(a,b,c,d){var e=a instanceof Array;a=e?a:[a];var f,g,h=d.stagger,i=[];for(g=0;g<a.length;g++)f=new E(a[g],b,c,d),h&&(f.delay=(d.delay||0)+(g*h||0)),f.start(),i.push(f);return e?i:f},to:function(a,b,c){return E.fromTo(a,null,b,c)},from:function(a,b,c){return E.fromTo(a,b,null,c)}}})}(),F=function(){function a(a,b,c,d,e){return a=a||{},b&&(a.EaseIn=b),c&&(a.EaseOut=c),d&&(a.EaseInOut=d),e&&(a.EaseNone=e),a}var b=a(null,null,null,null,function(a){return a}),c=a(null,function(a){return a*a},function(a){return-a*(a-2)},function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}),d=a(null,function(a){return a*a*a},function(a){return--a*a*a+1},function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}),e=a(null,function(a){return a*a*a*a},function(a){return-(--a*a*a*a-1)},function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}),f=a(null,function(a){return a*a*a*a*a},function(a){return(a-=1)*a*a*a*a+1},function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}),g=Math,h=g.PI,i=.5*h,j=g.sin,k=g.cos,l=g.pow,m=g.sqrt,n=a(null,function(a){return-k(a*i)+1},function(a){return j(a*i)},function(a){return-.5*(k(h*a)-1)}),o=a(null,function(a){return 0==a?0:l(2,10*(a-1))},function(a){return 1==a?1:-l(2,-10*a)+1},function(a){return 0==a||1==a?a:(a*=2)<1?.5*l(2,10*(a-1)):.5*(-l(2,-10*(a-1))+2)}),p=a(null,function(a){return-(m(1-a*a)-1)},function(a){return m(1- --a*a)},function(a){return(a/=.5)<1?-.5*(m(1-a*a)-1):.5*(m(1-(a-=2)*a)+1)}),q=a({a:1,p:.4,s:.1,config:function(a,b){q.a=a,q.p=b,q.s=b/(2*h)*Math.asin(1/a)||0}},function(a){return-(q.a*l(2,10*(a-=1))*j(2*(a-q.s)*h/q.p))},function(a){return q.a*l(2,-10*a)*j(2*(a-q.s)*h/q.p)+1},function(a){return(a*=2)<1?-.5*q.a*l(2,10*(a-=1))*j(2*(a-q.s)*h/q.p):q.a*l(2,-10*(a-=1))*j(2*(a-q.s)*h/q.p)*.5+1}),r=a({o:1.70158,s:2.59491,config:function(a){r.o=a,r.s=1.525*a}},function(a){return a*a*((r.o+1)*a-r.o)},function(a){return(a-=1)*a*((r.o+1)*a+r.o)+1},function(a){return(a*=2)<1?.5*a*a*((r.s+1)*a-r.s):.5*((a-=2)*a*((r.s+1)*a+r.s)+2)}),s=a(null,function(a){return 1-s.EaseOut(1-a)},function(a){return(a/=1)<.36364?7.5625*a*a:.72727>a?7.5625*(a-=.54545)*a+.75:.90909>a?7.5625*(a-=.81818)*a+.9375:7.5625*(a-=.95455)*a+.984375},function(a){return.5>a?.5*s.EaseIn(2*a):.5*s.EaseOut(2*a-1)+.5});return{Linear:b,Quad:c,Cubic:d,Quart:e,Quint:f,Sine:n,Expo:o,Circ:p,Elastic:q,Back:r,Bounce:s}}(),G=d.create({Mixes:e,constructor:function(a){this._source=[],this.add(a)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(a){var b=this;return a&&(a=a instanceof Array?a:[a],b._source=b._source.concat(a)),b},get:function(a){if(a)for(var b=this._source,c=0;c<b.length;c++){var d=b[c];if(d.id===a||d.src===a)return d}return null},getContent:function(a){var b=this.get(a);return b&&b.content},start:function(){var a=this;return a._loadNext(),a},_loadNext:function(){var a=this,b=a._source,c=b.length;if(a._loaded>=c)return void a.fire("complete");if(a._currentIndex<c-1&&a._connections<a.maxConnections){var d=++a._currentIndex,e=b[d],f=a._getLoader(e);if(f){var g=f.onLoad,h=f.onError;f.onLoad=function(b){f.onLoad=g,f.onError=h;var c=g&&g.call(f,b)||b.target;a._onItemLoad(d,c)},f.onError=function(b){f.onLoad=g,f.onError=h,h&&h.call(f,b),a._onItemError(d,b)},a._connections++}a._loadNext(),f&&f.load(e)}},_getLoader:function(a){var c=a.loader;if(c)return c;var d=a.type||b(a.src);switch(d){case"png":case"jpg":case"jpeg":case"gif":c=new H;break;case"js":case"jsonp":c=new I}return c},_onItemLoad:function(a,b){var c=this,d=c._source[a];d.loaded=!0,d.content=b,c._connections--,c._loaded++,c.fire("load",d),c._loadNext()},_onItemError:function(a,b){var c=this,d=c._source[a];d.error=b,c._connections--,c._loaded++,c.fire("error",d),c._loadNext()},getSize:function(a){for(var b=0,c=this._source,d=0;d<c.length;d++){var e=c[d];b+=(a?e.loaded&&e.size:e.size)||0}return b},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}}),H=d.create({load:function(a){var b=this,c=new Image;a.crossOrigin&&(c.crossOrigin=a.crossOrigin),c.onload=function(){b.onLoad(c)},c.onerror=c.onabort=b.onError.bind(c),c.src=a.src+(a.noCache?(-1==a.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(b){b=b||a.event;var c=b;return c.onload=c.onerror=c.onabort=null,c},onError:function(a){var b=a.target;return b.onload=b.onerror=b.onabort=null,a}}),I=d.create({load:function(b){var c=this,d=b.src,e="jsonp"==b.type;if(e){var f=b.callbackName||"callback",g=b.callback||"jsonp"+ ++I._count,h=a;h[g]||(h[g]=function(){delete h[g]})}e&&(d+=(-1==d.indexOf("?")?"?":"&")+f+"="+g),b.noCache&&(d+=(-1==d.indexOf("?")?"?":"&")+"t="+ +new Date);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.onload=c.onLoad.bind(c),i.onerror=c.onError.bind(c),i.src=d,b.id&&(i.id=b.id),document.getElementsByTagName("head")[0].appendChild(i)},onLoad:function(a){var b=a.target;return b.onload=b.onerror=null,b},onError:function(a){var b=a.target;return b.onload=b.onerror=null,a},Statics:{_count:0}}),J=d.create({Mixes:e,constructor:function(a){c.copy(this,a,!0),this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element){var a=this._element=new Audio;a.addEventListener("canplaythrough",this._onAudioEvent,!1),a.addEventListener("ended",this._onAudioEvent,!1),a.addEventListener("error",this._onAudioEvent,!1),a.src=this.src,a.volume=this.volume,a.load()}return this},_onAudioEvent:function(a){var b=a.type;switch(b){case"canplaythrough":a.target.removeEventListener(b,this._onAudioEvent),this.loaded=!0,this.duration=this._element.duration,this.fire("load"),this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){return this.playing&&this.stop(),this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._element.pause(),this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1),this},setVolume:function(a){return this.volume!=a&&(this.volume=a,this._element.volume=a),this},setMute:function(a){return this.muted!=a&&(this.muted=a,this._element.volume=a?0:this.volume),this},Statics:{isSupported:null!==a.Audio}}),K=function(){var b=a.AudioContext||a.webkitAudioContext,f=b?new b:null;return d.create({Mixes:e,constructor:function(a){c.copy(this,a,!0),this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=f,this._gainNode=f.createGain?f.createGain():f.createGainNode(),this._gainNode.connect(f.destination),this._onAudioEvent=this._onAudioEvent.bind(this),this._onDecodeComplete=this._onDecodeComplete.bind(this),this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var a=new XMLHttpRequest;a.src=this.src,a.open("GET",this.src,!0),a.responseType="arraybuffer",a.onload=this._onAudioEvent,a.onprogress=this._onAudioEvent,a.onerror=this._onAudioEvent,a.send(),this._buffer=!0}return this},_onAudioEvent:function(a){var b=a.type;switch(b){case"load":var c=a.target;c.onload=c.onprogress=c.onerror=null,this._context.decodeAudioData(c.response,this._onDecodeComplete,this._onDecodeError),c=null;break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"progress":this.fire(a);break;case"error":this.fire(a)}},_onDecodeComplete:function(a){this._buffer=a,this.loaded=!0,this.duration=a.duration,this.fire("load"),this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var a=this._context.createBufferSource();a.start||(a.start=a.noteOn,a.stop=a.noteOff),a.buffer=this._buffer,a.onended=this._onAudioEvent,this._gainNode.gain.value=this.muted?0:this.volume,a.connect(this._gainNode),a.start(0,this._offset),this._audioNode=a,this._startTime=this._context.currentTime,this.playing=!0},_clearAudioNode:function(){var a=this._audioNode;a&&(a.onended=null,a.disconnect(0),this._audioNode=null)},play:function(){return this.playing&&this.stop(),this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1),this},setVolume:function(a){return this.volume!=a&&(this.volume=a,this._gainNode.gain.value=a),this},setMute:function(a){return this.muted!=a&&(this.muted=a,this._gainNode.gain.value=a?0:this.volume),this},Statics:{isSupported:null!=b,enabled:!1,enable:function(){if(!this.enabled&&f){var a=f.createBufferSource();return a.buffer=f.createBuffer(1,1,22050),a.connect(f.destination),a.start?a.start(0,0,0):a.noteOn(0,0,0),this.enabled=!0,!0}return this.enabled}}})}(),L={_audios:{},enableAudio:function(){K.isSupported&&K.enable()},getAudio:function(a){a=this._normalizeSource(a);var b=this._audios[a.src];return b||(K.isSupported?b=new K(a):J.isSupported&&(b=new J(a)),this._audios[a.src]=b),b},removeAudio:function(a){var b="string"==typeof a?a:a.src,c=this._audios[b];c&&(c.stop(),c.off(),this._audios[b]=null,delete this._audios[b])},_normalizeSource:function(a){var b={};return"string"==typeof a?b={src:a}:c.copy(b,a),b}};c.Class=d,c.EventMixin=e,c.Renderer=j,c.CanvasRenderer=k,c.DOMRenderer=l,c.Matrix=m,c.Drawable=n,c.View=o,c.Container=p,c.Stage=q,c.Bitmap=r,c.Sprite=s,c.DOMElement=t,c.Graphics=u,c.Text=v,c.BitmapText=w,c.Button=x,c.TextureAtlas=y,c.Ticker=z,c.drag=D,c.Tween=E,c.Ease=F,c.LoadQueue=G,c.ImageLoader=H,c.ScriptLoader=I,c.HTMLAudio=J,c.WebAudio=K,c.WebSound=L,a.Hilo=c,a.H||(a.H=c)}(window);!function o(a,e,i){function t(l,n){if(!e[l]){if(!a[l]){var d="function"==typeof require&&require;if(!n&&d)return d(l,!0);if(s)return s(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var r=e[l]={exports:{}};a[l][0].call(r.exports,function(o){var e=a[l][1][o];return t(e?e:o)},r,r.exports,o,a,e,i)}return e[l].exports}for(var s="function"==typeof require&&require,l=0;l<i.length;l++)t(i[l]);return t}({1:[function(o,a,e){var i=Hilo.Class.create({Extends:Hilo.Container,constructor:function(o){o=o||{},i.superclass.constructor.call(this,o),this.init(o)},init:function(o){this.animateDuration=o.animateDuration,this._doRemoveMolePool=this._doRemoveMolePool.bind(this)},addMolePool:function(o,a){this._doRemoveMolePool(!1);var e=o.mole,i=o.shadow;this.addChildAt(o,1),a!==!1?(Hilo.Tween.to(e,{y:e.topY},{time:this.animateDuration}),Hilo.Tween.to(i,{alpha:1},{time:this.animateDuration})):(e.y=e.topY,i.alpha=1),this.molePool=o},removeMolePool:function(o){setTimeout(this._doRemoveMolePool,o||0)},_doRemoveMolePool:function(o){var a=this,e=a.molePool;if(null!=e&&!a.isRemoving){var i=e.mole,t=e.shadow;a.isRemoving=!0,o!==!1?(Hilo.Tween.to(i,{y:i.bottomY},{time:this.animateDuration,onComplete:function(){a.removeChild(e),a.molePool=null,a.isRemoving=!1,a.fire("molePoolRemoved",e)}}),Hilo.Tween.to(t,{alpha:0},{time:this.animateDuration})):(a.removeChild(e),a.molePool=null,a.isRemoving=!1,a.fire("molePoolRemoved",e),t.alpha=0)}}});a.exports=i},{}],2:[function(o,a,e){var i=Hilo.Class.create({config:{moleTypeMap:{normal:{mole:{x:0,y:165,score:10,topY:25,bottomY:165,maskX:0,maskY:25},shadow:{x:1,y:80},point:{x:85,y:30,rect:[779,0,65,25]}},boss:{mole:{x:0,y:155,score:100,topY:15,bottomY:155,maskX:0,maskY:15},shadow:{x:16,y:80},point:{x:80,y:0,rect:[779,50,65,25]}},golden:{mole:{x:0,y:170,score:50,topY:30,bottomY:170,maskX:0,maskY:30},shadow:{x:1,y:80},point:{x:100,y:40,rect:[779,25,65,25]}}}},Extends:Hilo.Container,constructor:function(o){o=o||{},i.superclass.constructor.call(this,o),this.init(o)},init:function(o){this.resQueue=o.resQueue,this.moleAtlas=o.moleAtlas,this.holeWidth=o.holeWidth,this.point=new Hilo.Bitmap({image:this.resQueue.get("moles").content,alpha:0,pointerEnabled:!1,rect:[779,0,65,25]}).addTo(this),this.shadow=new Hilo.Bitmap({id:"moleShadow",image:this.resQueue.get("moles").content,rect:[650,0,129,60],alpha:0,pointerEnabled:!1}).addTo(this),this.mole=new Hilo.Sprite({id:"mole_"+o.index,interval:10,frames:this.moleAtlas.getSprite("normal")}).addTo(this)},reset:function(o){var a=this.mole;if(!o&&(o="normal"),this.moleType=o,a.type!=o){var e=this.config.moleTypeMap[o];a.addFrame(this.moleAtlas.getSprite(o),0),Hilo.copy(a,e.mole),a.width=this.moleAtlas.getSprite(o)[0].rect[2],a.height=this.moleAtlas.getSprite(o)[0].rect[3],a.mask=(new Hilo.Graphics).drawRect(a.maskX,a.maskY,this.holeWidth,a.height);var i=e.point;this.point.setImage(this.resQueue.get("moles").content,i.rect),this.point.x=i.x,this.point.y=i.y,this.point.alpha=0;var t=e.shadow;this.shadow.x=t.x,this.shadow.y=t.y,this.shadow.alpha=0}a["goto"](0,!0)},hit:function(){this.point.alpha=1,Hilo.Tween.to(this.point,{alpha:0},{time:400}),this.mole["goto"](2,!0),this.shadow.alpha=0}});a.exports=i},{}],3:[function(o,a,e){var i=o("./hole"),t=o("./molePool"),s=Hilo.Class.create({Extends:Hilo.Container,constructor:function(o){o=o||{},s.superclass.constructor.call(this,o),this.init(o)},init:function(o){this.config=o.config,this.moleAtlas=o.moleAtlas,this.resQueue=o.resQueue,this.mockMoleList=new Array(15),this.mockMoleIndex=0,this._generateRandomMoleList(),this.animateDuration=this.config.animateDuration,this.holeWidth=this.config.holeWidth,this.holeHeight=this.config.holeHeight,this._initHoles(),this._initMolePools(),this.makeMolePool=this.makeMolePool.bind(this)},_initHoles:function(){var o=this.config.holeList||[];this.holes=[];for(var a=0,e=o.length;e>a;a++){var t=new i({id:"hole_"+a,x:o[a].x,y:o[a].y,width:this.holeWidth,height:this.holeHeight,animateDuration:this.animateDuration}).addTo(this);t.on("molePoolRemoved",this._onMolePoolRemoved.bind(this)),this.holes.push(t)}},_initMolePools:function(){this.molePools=[];for(var o=0;o<this.config.molePoolSize;o++){var a=new t({id:"molePool_"+o,resQueue:this.resQueue,moleAtlas:this.moleAtlas,holeWidth:this.holeWidth,index:o});a.on("molePoolHit",this._onMolePoolHitted.bind(this)),this.molePools.push(a)}},makeMolePool:function(o){this.stopMakeMolePool(),o&&(this.mockMoleIndex=0);var a=this._getRandomEmptyHole(),e=this.mockMoleIndex>15?"":this.mockMoleList[this.mockMoleIndex++];if(a&&this.molePools.length){var i=this.molePools.shift();i.reset(e),i.hitted=!1,a.addMolePool(i,!0),a.removeMolePool(this.config.showMoleDuration)}var t=this.config.makeMoleInterval;t=Math.random()*(t[1]-t[0])+t[0]|0,this.makeMoleTimeId=setTimeout(this.makeMolePool,t)},stopMakeMolePool:function(){clearTimeout(this.makeMoleTimeId)},_getRandomEmptyHole:function(){for(var o=this.holes.slice(0),a=0;a<o.length;a++)null!=o[a].molePool&&(o.splice(a,1),a--);var e=o.length;if(e){var i=Math.random()*e>>0;return o[i]}return null},_generateRandomMoleList:function(){this.mockMoleList[Math.floor(10*Math.random())+5]="boss";for(var o=0;2>o;o++){var a=Math.floor(10*Math.random())+5;this.mockMoleList[a]?o--:this.mockMoleList[a]="golden"}},_onMolePoolRemoved:function(o){var a=o.detail;this.molePools.push(a)},_onMolePoolHitted:function(o){var a=o.detail;a.hit()}});a.exports=s},{"./hole":1,"./molePool":2}],4:[function(o,a,e){var i=function(){this._init.apply(this,arguments)},t='<div class="u-modal-bg"></div>';$.extend(i.prototype,{tpl:'<div class="u-modal"></div>',_init:function(){return this._initDate(),this._initNode(),this._initEvent(),this},_initDate:function(){},_initNode:function(){this.parentNode=$(t),this.parentNode.hide().appendTo(document.body)},_initEvent:function(){},show:function(){this.parentNode.show()},hide:function(){this.parentNode.hide()}}),a.exports=i},{}],5:[function(o,a,e){var i=o("./mod/game"),t=o("./lib/util"),s=o("./mod/parseTpl"),l=o("./mod/commonModal"),n=o("./mod/modalTpl");window.lib&&lib.mtop&&(lib.mtop.config.mainDomain="taobao.com",lib.mtop.config.subDomain=t.envMap[t.envDect]),function(o){var a=parseFloat(o.version),e="daily"===t.envDect;a>1.1&&o.config({packages:[{name:"tbc",path:e?"//g.assets.daily.taobao.net/tbc/":"//g.alicdn.com/tbc/",ignorePackageNameInUri:!0}]})}(KISSY),window.record=function(o,a,e,i){var t=navigator.userAgent,s=/AliApp\(TM\//.test(t),l=/AliApp\(TB\//.test(t),n=s?"tmall":l?"taobao":"other",d=location.host.split(".")[0],c=/iPhone|iPad|iPod|iwatch/gi.test(t)?"ios":/Android/gi.test(t)?"android":"other";!function(){window.goldlog?goldlog.record(o,a||"",e+"&client="+n+"&domain="+d+"&os="+c,i):setTimeout(arguments.callee,200)}()},KISSY.use("tbc/share/2.1.1/,tbc/mini-login/2.2.0/",function(o,a,e){var d={config:{imgResList:[{id:"moles",src:"//img.alicdn.com/tps/TB1C0__JVXXXXcUXXXXXXXXXXXX-960-140.png"}],APPKEY:"APP_TAOBAO_ELEVEN",THRESHOLDSCORE:150,MTOPPARAM:{bizType:"liebian1111.lottery",bizParam:"",type:"POST",asac:"D8DYM96MPMYI5RO3SM63",umidToken:window.UUID,ua:""},SHAREIMGMAP:{tmall:"//img.alicdn.com/tps/TB1BYFHKXXXXXb1XpXXXXXXXXXX-400-400.jpg",crazy:"//img.alicdn.com/tps/TB15lluKXXXXXXgXVXXXXXXXXXX-400-400.jpg"},TMALLDRAWSAPI:"//latour.taobao.com/interact/interactAwardList.do",CRAZYURL:"http://m.laiwang.com/wow/lafite/act/khc"},init:function(){if(this.commonModal=new l,this.shopId=t.getUrlParam("shopId"),this.interactId=t.getUrlParam("interactId"),this.shopUrl=decodeURIComponent(t.getUrlParam("shopcjyUrl")||this.config.CRAZYURL),!this.shopId){var o=this._getUrlParam("from_url",window.location.search.substr(1)),a=o&&o.split("?")[1]||"";this.shopId=this._getUrlParam("shopId",a),this.interactId=this._getUrlParam("interactId",a),this.shopUrl=decodeURIComponent(this._getUrlParam("shopcjyUrl",a)||this.config.CRAZYURL)}return this._isSupport()?(this._initDate(),this._initNode(),void this._initEvent()):0},_isSupport:function(){var o=window.navigator.userAgent,a=window.ActiveXObject,e={ie6:a&&!window.XMLHttpRequest,ie7:/MSIE 7.0/i.test(o),ie8:/MSIE 8.0/i.test(o)};if(e.ie6||e.ie7||e.ie8){var i=_.template(n.unCompatibleTpl);return this.commonModal.show(i({shopUrl:this.shopUrl})),window.__WPO&&window.__WPO.custom("count","unCompatible"),!1}return!0},_initDate:function(){this.resQueue=new Hilo.LoadQueue,this.resQueue.add(this.config.imgResList),this.Game=i,this.totalScore=0,this.thresholdScore=this.config.THRESHOLDSCORE,this.isTmall=this.interactId?!0:!1,this.shareUI=a,this.drawsTplFun=_.template(n.drawsTpl),this.failTplFun=_.template(n.failModalTpl),this.palyLogin=new e},_initNode:function(){this.gameBody=$("#J_game"),this.maskModel=this.gameBody.find(".J_mask"),this.reluBtn=this.gameBody.find(".J_rule"),this.showDrawBtn=this.gameBody.find(".J_showDraw"),this.playBtn=this.gameBody.find(".J_play"),this.panel=$("#J_panel"),this.timeCount=this.panel.find(".J_timeNum"),this.timeLineNode=this.panel.find(".J_timeLine"),this.scoreNode=this.panel.find(".J_score"),this.modalNode=this.commonModal.parentNode},_initEvent:function(){this.reluBtn.on("click",function(){this.commonModal.show(n.ruleTpl),window.record&&window.record("/uaward.8.2","","api=moleGame.showRule","H46747614")}.bind(this)),this.showDrawBtn.on("click",this._showDrawsHandle.bind(this)),this.playBtn.on("click",this._checkBeforeGame.bind(this)),this.resQueue.on("complete",this._initGame.bind(this)).start(),this.modalNode.on("click",".J_close",this._closeDlgHandle.bind(this)),this.modalNode.on("click",".J_normalClose",this._normalCloseDlgHandle.bind(this)),this.modalNode.on("click",".J_replay",this._gameReplayHandle.bind(this)),this.modalNode.on("click",".J_retry",this._gameRetryHandle.bind(this)),this.modalNode.on("click",".J_share",this._shareHandle.bind(this));var o=this;o.palyLogin.on("login",function(){o._startGame()})},_initGame:function(){this.Game.init({resQueue:this.resQueue}),this.Game.on("hit",this._moleHitCb.bind(this))},_checkBeforeGame:function(){var o=this;o.palyLogin.check(function(a,e){e?o._startGame():o.palyLogin.show()}),window.record&&window.record("/uaward.8.2","","api=moleGame.start","H46747614")},_startGame:function(){var o=this;o.totalScore=0,o.scoreNode.text(0),o.timeCount.text(15),o.timeLineNode.css("width",0),o.maskModel.hide(),o.panel.show(),o.Game.start(),o.countdown=lib.countdown({endDate:.001*+new Date+15,onUpdate:function(a){o._updateCountdown(a.totalSeconds)},onEnd:o._gameEndHandle.bind(o)}),o.countdown.start()},_updateCountdown:function(o){var a,e;o>=10?(a=[800,1200],e=2e3):o>=5?(a=[400,600],e=1e3):(a=[300,400],e=700),this.timeCount.text(o),this.timeLineNode.css("width",535*(15-o)/15),this.Game.config.makeMoleInterval=a,this.Game.config.showMoleDuration=e},_moleHitCb:function(o){var a=o.detail;this.totalScore+=a.score,this.scoreNode.text(this.totalScore)},_gameEndHandle:function(){var o=this;if(o.Game.stop(),o.countdown=null,o.totalScore<o.thresholdScore)return void o.commonModal.show(o.failTplFun({score:o.totalScore,hasReach:!1}));var a={interactId:o.interactId,shopId:o.shopId,appkey:o.config.APPKEY};if(o.config.MTOPPARAM.ua=window.getUA(),!a.shopId)return void o.commonModal.show(n.errorTpl);o.config.MTOPPARAM.bizParam=JSON.stringify(a);var e=new Date;lib.mtop.request({api:"mtop.taobao.aplatform.pc.securySet",v:"1.0",data:o.config.MTOPPARAM,ecode:1},function(a){var i=new Date;a.retType===lib.mtop.RESPONSE_TYPE.SUCCESS?(o.commonModal.show(s(a.data,o.totalScore)),window.__WPO&&window.__WPO.retCode("mtop.taobao.aplatform.pc.securySet",!0,i-e,"success")):a.retType===lib.mtop.RESPONSE_TYPE.ERROR?(o.commonModal.show(n.errorTpl),window.__WPO&&window.__WPO.retCode("mtop.taobao.aplatform.pc.securySet",!0,i-e,"error1:mtop error")):(o.commonModal.show(n.errorTpl),window.__WPO&&window.__WPO.retCode("mtop.taobao.aplatform.pc.securySet",!0,i-e,"error2:other"))},function(a){var i=new Date;o.commonModal.show(n.errorTpl),window.__WPO&&window.__WPO.retCode("mtop.taobao.aplatform.pc.securySet",!0,i-e,"error3:mtop reject")})},_showDrawsHandle:function(){var o=this,a=new Date;o.isTmall?$.ajax({url:o.config.TMALLDRAWSAPI,dataType:"jsonp",jsonpCallback:"callback",data:{interactId:o.interactId},success:function(e){var i=new Date;e&&e.success===!0&&e.data&&(e.data.awards||e.data.redEnvelope)?(o.commonModal.show(o.drawsTplFun({isTmall:!0,data:o._formateTmallDraws(e.data)})),window.__WPO&&window.__WPO.retCode("latour.taobao.com/interact/interactAwardList.do",!0,i-a,"success")):(o.commonModal.show(n.drawsFailTpl),window.__WPO&&window.__WPO.retCode("latour.taobao.com/interact/interactAwardList.do",!0,i-a,"error1"))},error:function(){var e=new Date;o.commonModal.show(n.drawsFailTpl),window.__WPO&&window.__WPO.retCode("latour.taobao.com/interact/interactAwardList.do",!0,e-a,"error2:ajax error")}}):lib.mtop.request({api:"mtop.taobao.aplatform.weakGet",v:"1.0",data:{bizType:"liebian1111",bizParam:o.shopId},ecode:1},function(e){var i=new Date;e.retType===lib.mtop.RESPONSE_TYPE.SUCCESS&&e.data&&"true"===e.data.result?(o.commonModal.show(o.drawsTplFun({isTmall:!1})),window.__WPO&&window.__WPO.retCode("mtop.taobao.aplatform.weakGet",!0,i-a,"success")):(o.commonModal.show(n.drawsFailTpl),window.__WPO&&window.__WPO.retCode("mtop.taobao.aplatform.weakGet",!0,i-a,"error1"))},function(e){var i=new Date;o.commonModal.show(n.drawsFailTpl),window.__WPO&&window.__WPO.retCode("mtop.taobao.aplatform.weakGet",!0,i-a,"error2:mtop reject")}),window.record&&window.record("/uaward.8.2","","api=moleGame.showGameAward","H46747614")},_formateTmallDraws:function(o){var a={interactCoupon:[],flowPackage:[],mouRedEnvelope:[]};return o.awards&&o.awards.length>0&&$.each(o.awards,function(o,e){var i,t,s,l=e.awardBean;"interactCoupon"===l.type||"interactItemCoupon"===l.type?(s=l.extra.attribute,"string"==typeof s&&(s=JSON.parse(s)),i=s.startDate.split(" ")[0].replace(/-/g,"."),t=s.endDate.split(" ")[0].replace(/-/g,"."),a.interactCoupon.push({name:l.name,type:l.type,time:i+"-"+t,value:l.extra.value,startFee:l.extra.startFee})):"flowPackage"===l.type?a.flowPackage.push({flowSize:l.extra.flowSize}):"mouRedEnvelope"===l.type&&a.mouRedEnvelope.push({value:l.extra.value})}),a},_gameReplayHandle:function(){this._startGame(),window.record&&window.record("/uaward.8.2","","api=moleGame.replay","H46747614"),this.commonModal.hide()},_gameRetryHandle:function(){window.location.reload()},_closeDlgHandle:function(){this.commonModal.hide(),window.location.reload()},_normalCloseDlgHandle:function(){this.commonModal.hide()},_shareHandle:function(o){var a,e,i,t=this,s=$(o.target),l=s.attr("data-type")||"";"interactCoupon"===l||"flowPackage"===l||"alipayRedEnvelope"===l?(a=["11"+(s.attr("data-name")||""),""+s.attr("data-comt"),"11"].join(""),e=t.shopUrl,i=t.config.SHAREIMGMAP.tmall):(a="11",e=t.config.CRAZYURL,i=t.config.SHAREIMGMAP.crazy),t.commonModal.hide(),t.shareUI.init({type:"webpage",key:e,client_id:"182337",thumb:i,token:window.UUID,title:"11",comment:a,callback:{init:function(){t.commonModal.show(" ")},render:function(){$(".tbc_share_wrap").css("left","355px")},destory:function(){window.location.reload()},success:function(){},fail:function(){}}}),window.record&&window.record("/uaward.8.2","","api=moleGame.share","H46747614")},_getUrlParam:function(o,a){var e=new RegExp("(^|&)"+o+"=([^&]*)(&|$)"),i=a.match(e);return null!=i?unescape(i[2]):null}},c=new e;c.check(function(o,a){a?d.init():c.show()}),c.on("login",function(){d.init()})})},{"./lib/util":6,"./mod/commonModal":7,"./mod/game":8,"./mod/modalTpl":9,"./mod/parseTpl":10}],6:[function(o,a,e){var i={envDect:function(){return/m.taobao.com/.test(location.host)?"online":/wapa.taobao.com/.test(location.host)?"ready":"daily"}(),envMap:{daily:"waptest",ready:"wapa",online:"m"},getUrlParam:function(o){var a=new RegExp("(^|&)"+o+"=([^&]*)(&|$)"),e=decodeURIComponent(window.location.search.substr(1)).match(a);return null!=e?unescape(e[2]):null}};a.exports=i},{}],7:[function(o,a,e){var i=o("../base/modal/baseModal"),t=['<div class="u-share success">','<div class="share-head">','<div class="J_close close"></div>',"</div>",'<div class="share-body">','<div class="tip"></div>','<div class="img"></div>',"</div>",'<div class="share-footer">','<div class="modal-btn J_replay"></div>','<a class="modal-btn shop"></a>',"</div>","</div>"].join(""),s=function(){this.superclass=i,this._init.apply(this,arguments)};$.extend(s.prototype,i.prototype,{_init:function(){return this.superclass.prototype._init.call(this),this},_initNode:function(){this.superclass.prototype._initNode.call(this),this.document=$(document)},_initEvent:function(){this.superclass.prototype._initEvent.call(this)},show:function(o){this.tpl=o||t,this.parentNode.html(this.tpl),this.superclass.prototype.show.call(this)}}),a.exports=s},{"../base/modal/baseModal":4}],8:[function(o,a,e){var i=o("../base/game/scene.js"),t={config:{width:872,height:500,holeList:[{x:95,y:110},{x:235,y:150},{x:455,y:125},{x:655,y:175},{x:45,y:255},{x:220,y:330},{x:375,y:255},{x:535,y:330},{x:655,y:305}],holeWidth:120,holeHeight:140,molePoolSize:3,makeMoleInterval:[1e3,2e3],showMoleDuration:1500,animateDuration:300},init:function(o){Hilo.copy(this.config,o),Hilo.Class.mix(this,Hilo.EventMixin),this._initDate(),this._initStage(),this._initViews()},_initDate:function(){this.resQueue=this.config.resQueue,this.width=this.config.width,this.height=this.config.height,this.moleAtlas=new Hilo.TextureAtlas({image:this.resQueue.get("moles").content,frames:[[0,0,85,140],[87,0,85,140],[174,0,111,140],[288,0,111,140],[402,0,120,140],[525,0,120,140],[862,0,85,140],[851,0,111,140],[845,0,120,140]],sprites:{normal:[0,1,6],boss:[2,3,7],golden:[4,5,8]}})},_initStage:function(){this.stage=new Hilo.Stage({canvas:document.getElementById("J_draw"),width:this.width,height:this.height}),this.ticker=new Hilo.Ticker(60),this.ticker.addTick(Hilo.Tween),this.ticker.addTick(this.stage),this.ticker.start();var o=Hilo.event.POINTER_START;this.stage.enableDOMEvent(o),this.stage.on(o,this._onPointerStart.bind(this))},_onPointerStart:function(o){var a=o.eventTarget;if(a){var e=-1!=a.id.indexOf("mole"),i=a.parent;e&&i&&!i.hitted&&(i.hitted=!0,i.fire("molePoolHit",i),this.fire("hit",a))}},_initViews:function(){this.Scene=new i({config:this.config,moleAtlas:this.moleAtlas,resQueue:this.resQueue}),this.stage.addChild(this.Scene)},start:function(){this.config.makeMoleInterval=[1e3,2e3],this.config.showMoleDuration=1500,this.Scene.makeMolePool(!0)},stop:function(){this.Scene.stopMakeMolePool()}};a.exports=t},{"../base/game/scene.js":3}],9:[function(o,a,e){var i={interactCouponTpl:['<div class="u-modal u-succ-modal u-good-coupon">','<div class="modal-head">','<img class="head-logo" src="<%= shopInfo.logo%>">','<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">',"<p></p>",'<p class="award"><%= coupon.value%>','<% if(type === "interactCoupon"){%>',"<% }else{%><% }%>","</p>",'<div class="good-coupon">','<div class="icon-border coupon-border"><i class="iconfont icon-coupon"></i></div>','<div class="coupon-detail">','<div class="coupon-price"><span>&yen;</span><%= coupon.value%></div>','<div class="coupon-cond"><%= coupon.startFee%></div>',"</div>",'<div class="coupon-info">','<p class="coupon-name">','<% if(type === "interactCoupon"){%><%= coupon.couponName%>',"<% }else{%>/<% }%>","</p>",'<p class="coupon-time"><%= coupon.startDate%> - <%= coupon.endDate%></p>',"</div>","</div>","</div>",'<div class="modal-footer">','<div class="modal-btn share J_share" data-name="<%= shopInfo.shopNick%>" ','data-comt="<%= coupon.value%><% if(type === "interactCoupon"){%>','<% }else{%><%}%>" data-type="interactCoupon"></div>','<div class="modal-btn replay J_replay"></div>',"</div>","</div>"].join(""),flowPackageTpl:['<div class="u-modal u-succ-modal u-traffic-package">','<div class="modal-head">','<img class="head-logo" src="<%= shopInfo.logo%>">','<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">',"<p></p>",'<p class="award"><%= flowSize%>M</p>','<p class="awardTip">---</p>','<div class="traffic-package">','<div class="icon-border package-border"><i class="iconfont icon-mianfeiliuliang"></i></div>','<div class="package-num"><%= flowSize%><span>M</span></div>','<div class="package-name"></div>',"</div>","</div>",'<div class="modal-footer">','<div class="modal-btn share J_share" data-name="<%= shopInfo.shopNick%>" ','data-comt="<%= flowSize%>M" data-type="flowPackage"></div>','<div class="modal-btn replay J_replay"></div>',"</div>","</div>"].join(""),normalPackageTpl:['<div class="u-modal u-succ-modal u-red-package">','<div class="modal-head">','<img class="head-logo" src="<%= shopInfo.logo%>">','<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">',"<p></p>",'<p><span class="award"><%= value%></span></p>','<div class="red-package"></div>',"</div>",'<div class="modal-footer">','<div class="modal-btn share J_share" data-name="<%= shopInfo.shopNick%>" ','data-comt="<%= value%>" data-type="<% if(isTmall===true){%>alipayRedEnvelope<%}else{%>crazy<%}%>"></div>','<div class="modal-btn replay J_replay"></div>',"</div>","</div>"].join(""),specialPackageTpl:['<div class="u-special-package">','<div class="modal-head">','<img class="head-logo" src="<%= shopInfo.logo%>">','<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">',"<p></p>","<p><span><%= value%></span></p>","</div>",'<div class="modal-footer">','<div class="modal-btn share J_share" data-name="<%= shopInfo.shopNick%>" ','data-comt="<%= value%>" data-type="crazy"></div>','<div class="modal-btn replay J_replay"></div>',"</div>","</div>"].join(""),shopCouponTpl:['<div class="u-modal u-succ-modal u-shop-coupon">','<div class="modal-head">','<img class="head-logo" src="<%= shopInfo.logo%>">','<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">',"<p></p>",'<p><span class="award">1011</span></p>','<p class="awardTip">11</p>','<div class="coupon-info">','<div class="point top"></div>','<div class="point bottom"></div>','<div class="coupon-price">',"<span>&yen;</span>10","</div>",'<div class="coupon-detail">','<div class="coupon-name">11</div>','<div class="coupon-time">2015.11.11 00:00:00 - 23:59:59</div>',"</div>","</div>","</div>",'<div class="modal-footer">','<div class="modal-btn share J_share" data-name="<%= shopInfo.shopNick%>" ','data-comt="" data-type="crazy"></div>','<div class="modal-btn replay J_replay"></div>',"</div>","</div>"].join(""),huaLockPackageTpl:['<div class="u-modal u-succ-modal u-hua-locked">','<div class="modal-head">','<img class="head-logo" src="<%= shopInfo.logo%>">','<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">',"<p></p>",'<p><span class="award"></span></p>','<p class="awardTip">()</p>','<div class="red-package"></div>','<p class="tip">',"",'<a target="_blank" href="https://login.m.taobao.com/login_to.do?from=taobao&to=375a695293093fd8d792dd16d7ad0a35&forceH5=YES&redirectUrl=https%3A%2F%2Fpcreditprod.alipay.com%2Fwap%2Fmoonlight%2Fcontract.htm"></a>,',"</p>",'<p class="tip"><a target="_blank" href="https://login.m.taobao.com/login_to.do?from=taobao&to=375a695293093fd8d792dd16d7ad0a35&forceH5=YES&redirectUrl=https%3A%2F%2Fpcreditprod.alipay.com%2Fwap%2Fmoonlight%2Fcontract.htm"></a></p>',"</div>",'<div class="modal-footer">',"<a class=\"modal-btn apply-btn\" href=\"//www.tmall.com/wow/lafite/act/huabeiopeninfo\" target=\"_blank\" onclick=\"window.record && window.record('/uaward.8.2','','api=moleGame.huabeiBtn','H46747614');\"></a>","</div>","</div>"].join(""),morePackageTpl:['<div class="u-modal u-succ-modal u-more-package">','<div class="modal-head">','<img class="head-logo" src="<%= shopInfo.logo%>">','<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">',"<p></p>",'<p><span class="award"></span></p>','<p class="awardTip">(:--)</p>','<div class="red-package"></div>',"</div>",'<div class="modal-footer">',"<a class=\"modal-btn\" href=\"<%= helpPrefix%>\" target=\"_blank\" onclick=\"window.record && window.record('/uaward.8.2','','api=moleGame.breakupBtn','H46747614');\"></a>","</div>","</div>"].join(""),failModalTpl:['<div class="u-modal u-fail-modal">','<div class="modal-head">',"<% if(hasReach && hasReach === true){%>",'<img class="head-logo" src="<%= shopInfo.logo%>">',"<% }%>",'<div class="J_close head-close"></div>','<div class="game-score"><span><%=  score%></span></div>',"</div>",'<div class="modal-body">','<div class="fail-img"></div>',"<% if(hasReach && hasReach === true && failText){%>","<%= failText%>","<% }else{%>","<p></p>","<p>...</p>","<% }%>","</div>",'<div class="modal-footer">','<div class="modal-btn replay J_replay"></div>',"</div>","</div>"].join(""),errorTpl:['<div class="u-modal u-fail-modal error">','<div class="modal-head">','<div class="J_close head-close"></div>',"</div>",'<div class="modal-body">','<div class="fail-img"></div>',"<p></p>","</div>",'<div class="modal-footer">','<div class="modal-btn retry J_retry"></div>',"</div>","</div>"].join(""),ruleTpl:['<div class="u-rule">','<div class="rule-head">','<div class="closeBtn J_normalClose"></div>',"<span></span>","</div>",'<div class="rule-body">','<img src="//img.alicdn.com/tps/TB1FK3lJVXXXXauXpXXXXXXXXXX-716-442.jpg" style="width:100%;">',"</div>","</div>"].join(""),drawsTpl:['<div class="u-draws">','<div class="draw-head">','<div class="closeBtn J_normalClose"></div>',"<span></span>","</div>",'<div class="draw-body">',"<% if(isTmall === true){%>","<% if(data && data.mouRedEnvelope && data.mouRedEnvelope.length>0){%>",'<div class="draw-section">','<div class="section-title"><div class="title-name"></div></div>','<div class="section-content">',"<% _.each(data.mouRedEnvelope,function(item,index){%>",'<div class="package"><div class="num"><%= item.value%></div></div>',"<% })%>","</div>","</div>","<% }%>","<% if(data && data.interactCoupon && data.interactCoupon.length>0){%>",'<div class="draw-section">','<div class="section-title"><div class="title-name"></div></div>','<div class="section-content">',"<% _.each(data.interactCoupon,function(item,index){%>",'<div class="discount">','<div class="icon-border discount-border"><i class="iconfont icon-coupon"></i></div>','<div class="discount-detail">','<div class="discount-price"><span>&yen;</span><%= item.value%></div>','<div class="discount-cond"><%= item.startFee%></div>',"</div>",'<div class="discount-info">','<p class="discount-name">','<% if(item.type === "interactItemCoupon"){%>',"/","<% }else{%>","<%= item.name%>","<% }%>","</p>",'<p class="discount-time"><%= item.time%></p>',"</div>","</div>","<% })%>","</div>","</div>","<% }%>","<% if(data && data.flowPackage && data.flowPackage.length>0){%>",'<div class="draw-section">','<div class="section-title"><div class="title-name"></div></div>','<div class="section-content">',"<% _.each(data.flowPackage,function(item,index){%>",'<div class="traffic-package">','<div class="icon-border package-border"><i class="iconfont icon-mianfeiliuliang"></i></div>','<div class="package-num"><%= item.flowSize%><span>M</span></div>','<div class="package-name"></div>',"</div>","<% })%>","</div>","</div>","<% }%>","<% }else{%>",'<div class="draw-section">','<div class="section-title"><div class="title-name">11</div></div>','<div class="section-content">','<div class="package unOpen"></div>','<div class="package"><div class="num">1</div></div>','<div class="package"><div class="num">2</div></div>','<div class="package"><div class="num">5</div></div>','<div class="package"><div class="num">10</div></div>','<div class="package"><div class="num">1111</div></div>',"</div>","</div>",'<div class="draw-section">','<div class="section-title"><div class="title-name">11</div></div>','<div class="section-content">','<div class="coupon-item">','<div class="point top"></div>','<div class="point bottom"></div>','<div class="coupon-price"><span>&yen;</span>10</div>','<div class="coupon-detail">','<div class="coupon-name">11</div>','<div class="coupon-time">2015.11.11 00:00:00-23:59:59</div>',"</div>","</div>","</div>","</div>","<% }%>","</div>","</div>"].join(""),drawsFailTpl:['<div class="u-draws u-drawFail">','<div class="draw-head">','<div class="closeBtn J_normalClose"></div>',"<span></span>","</div>",'<div class="draw-body">','<div class="fail-img"></div>',"<p></p>","</div>","</div>"].join(""),unCompatibleTpl:['<div class="u-modal u-unsupport-modal">','<div class="unsupport-head">','<div class="closeBtn J_close"></div>',"</div>",'<div class="unsupport-body">','<div class="qrCode">','<img src="//gcodex.alicdn.com//web/doTransit.do?url=<%= shopUrl%>&iframe=1&biz=tmall&mmstat=isvShopUrl"/>',"<p></p>","</div>",'<div class="unsupport-img"></div>','<div class="tip">out</div>',"<p><p>","<p></p>","</div>","</div>"].join("")};a.exports=i},{}],10:[function(o,a,e){var i=o("./modalTpl"),t=(o("../lib/util"),{logoPrefix:"//gdp.alicdn.com/shop-logo",helpPrefix:"//h5.m.taobao.com/mfe/fissionrelaypc.html?call=1&bonusIndex="}),s={parseTmall:function(o,a){var e,s,l,n,d,c=o.result,r=function(){},p={logo:o.logo?t.logoPrefix+o.logo:"",shopNick:o.shopNick||""},h="";switch(c.awardType){case"interactCoupon":e=c.extra||{},s={value:e.value||"",startFee:e.startFee||"",startDate:"",endDate:"",couponName:""},e.attribute&&(d=JSON.parse(e.attribute),l=d.startDate,n=d.endDate,s.couponName=d.shopName||"",s.startDate=l&&l.length>0?l.split(" ")[0].replace(/-/g,"."):"",s.endDate=n&&n.length>0?n.split(" ")[0].replace(/-/g,"."):""),r=_.template(i.interactCouponTpl),h=r({shopInfo:p,coupon:s,score:a,type:"interactCoupon"});break;case"interactItemCoupon":e=c.extra||{},s={value:e.value||"",startFee:e.startFee||"",startDate:"",endDate:"",couponName:""},e.attribute&&(d=JSON.parse(e.attribute),l=d.startDate,n=d.endDate,s.startDate=l&&l.length>0?l.split(" ")[0].replace(/-/g,"."):"",s.endDate=n&&n.length>0?n.split(" ")[0].replace(/-/g,"."):""),r=_.template(i.interactCouponTpl),h=r({shopInfo:p,coupon:s,score:a,type:"interactItemCoupon"});break;case"flowPackage":e=c.extra||{},r=_.template(i.flowPackageTpl),h=r({shopInfo:p,flowSize:e.flowSize||"",score:a});break;case"alipayRedEnvelope":e=c.extra||{},r=_.template(i.normalPackageTpl),h=r({shopInfo:p,value:e.denomination||"",score:a,isTmall:!0});break;default:h=this._errorHandle()}return h},parseNormal:function(o,a){var e=o.result||{},s=function(){},l={logo:o.logo?t.logoPrefix+o.logo:"",shopNick:o.shopNick||""},n="";switch(e.awardType){case"1":s=_.template(i.normalPackageTpl),n=s({shopInfo:l,value:e.value,score:a,isTmall:!1});break;case"2":var d=e.style;d&&(s=_.template(i.specialPackageTpl),n=s({shopInfo:l,value:e.value,score:a}));break;case"4":s=_.template(i.shopCouponTpl),n=s({shopInfo:l,score:a});break;case"5":s=_.template(i.huaLockPackageTpl),n=s({shopInfo:l,score:a});break;case"6":s=_.template(i.morePackageTpl);var c=e.uuid?t.helpPrefix+e.uuid:"";n=s({shopInfo:l,score:a,helpPrefix:c});break;default:n=this._errorHandle()}return n},_errorHandle:function(){return window.__WPO&&window.__WPO.custom("count","parse error"),
i.errorTpl},failTextRandom:function(){var o=["<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>","<p></p><p></p>"];return o[Math.floor(11*Math.random())]}},l=function(o,a){if(!o||"false"===o.valid){var e={logo:o.logo?t.logoPrefix+o.logo:"",shopNick:o.shopNick||""};return _.template(i.failModalTpl)({score:a,hasReach:!0,shopInfo:e,failText:s.failTextRandom()})}return"true"===o.isTmall?s.parseTmall(o,a):s.parseNormal(o,a)};a.exports=l},{"../lib/util":6,"./modalTpl":9}]},{},[5]);