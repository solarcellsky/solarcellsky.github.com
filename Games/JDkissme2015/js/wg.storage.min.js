function $extend(a,b){a=a||{};for(var c in b)a[c]=b[c];return a}function $loadJs(a){var b=document.createElement("script");b.charset="utf-8",b.src=a,document.getElementsByTagName("body")[0].appendChild(b)}function $delayFn(a,b){window[a]?(window[a](b),$delayFn.timer&&(clearTimeout($delayFn.timer),$delayFn.timer=null)):$delayFn.timer=setTimeout(function(){$delayFn(a,b)},120)}function $namespace(name){for(var arr=name.split(","),r=0,len=arr.length;len>r;r++)for(var i=0,k,name=arr[r].split("."),parent={};k=name[i];i++)0===i?eval("(typeof "+k+')==="undefined"?('+k+'={}):"";parent='+k):parent=parent[k]=parent[k]||{}}function $getQuery(a){var b=arguments[1]||window.location.search,c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),d=b.substr(b.indexOf("?")+1).match(c);return null!=d?d[2]:""}function $setCookie(a,b,c,d,e,f){var g=new Date,c=arguments[2]||null,d=arguments[3]||"/",e=arguments[4]||null,f=arguments[5]||!1;c?g.setMinutes(g.getMinutes()+parseInt(c)):"",document.cookie=a+"="+escape(b)+(c?";expires="+g.toGMTString():"")+(d?";path="+d:"")+(e?";domain="+e:"")+(f?";secure":"")}function $getCookie(a){var b=new RegExp("(^| )"+a+"(?:=([^;]*))?(;|$)"),c=document.cookie.match(b);return c?c[2]?unescape(c[2]):"":null}function $delCookie(a,b,c,d){var e=$getCookie(a);if(null!=e){var f=new Date;f.setMinutes(f.getMinutes()-1e3),b=b||"/",document.cookie=a+"=;expires="+f.toGMTString()+(b?";path="+b:"")+(c?";domain="+c:"")+(d?";secure":"")}}function $report(a){$loadUrl({url:a+(-1==a.indexOf("?")?"?":"&")+Math.random(),element:"img"})}function $loadUrl(a){function b(){c&&(c.onload=c.onreadystatechange=c.onerror=null,c.parentNode&&c.parentNode.removeChild(c),c=null)}a.element=a.element||"script";var c=document.createElement(a.element);c.charset=a.charset||"utf-8",a.onBeforeSend&&a.onBeforeSend(c),c.onload=c.onreadystatechange=function(){(/loaded|complete/i.test(this.readyState)||-1==navigator.userAgent.toLowerCase().indexOf("msie"))&&(a.onLoad&&a.onLoad(),b())},c.onerror=function(){b()},c.src=a.url,document.getElementsByTagName("head")[0].appendChild(c)}!function(a){function b(){}function c(a,b,c){var d=JD.report.data.getLogParam(),e={chan_type:d.chan_type,pinid:d.pinid,wid:d.wid,logid:JD.report.data.logid,ver:b,v:c};e.v=e.v||{},JD.report.data.isFsApp&&(e.v.clientid=$getCookie("clientid")||""),window.lg&&lg(a,b,e)}function d(a){var b=window._vurl?{vurl:encodeURIComponent(window._vurl)||""}:{};b.target=a||"",$extend(b,JD.report.data.getLogParam()),window.lg&&lg(t,ver,b)}function e(a){if("[object Object]"=={}.toString.call(a)){a.vurl&&(window._vurl=a.vurl);var b=window._vurl?{vurl:encodeURIComponent(window._vurl)||""}:{};b.target=a.ptag||"",b.target=b.target.replace("%2524","%40").replace("%24","%40").replace(/\$/g,"%40"),$extend(b,JD.report.data.getLogParam()),$extend(b,a),delete b.ptag,window.lg&&lg("log_type","1.0",b),JD.report.data.clickBI(b)}}function f(){var a=window.ja_data||{};if(!window.GLOBAL_MANUAL_CLICK&&!a.disable_auto){if(!window.$)return void setTimeout(arguments.callee,40);if("function"!=typeof $(document).tap)return;$("body").on("tap",function(a){for(var b,c=(window.ja_data||{},a.target),d="",e=JD.report.data.sw,f=JD.report.data.nw;!d&&c&&"BODY"!=c.nodeName&&c.getAttribute&&(!b&&(b=c.getAttribute("manualclick")||c.manualclick||""),!b);)d=c.getAttribute("ptag")||c.getAttribute("PTAG")||c.getAttribute("href")||"",(d&&"#"==d[0]||d.indexOf("javascript")>-1)&&(d=""),d=d||c.getAttribute("data-tourl")||c.getAttribute("tourl")||c.getAttribute("target_href")||"",cpos=c.getAttribute("cpos")||"",d||(c=c.parentNode);if(!b){d=d||"",d=d.replace("%2524","%40").replace("%24","%40").replace(/\$/g,"%40");var g=window._vurl?{target:d,vurl:encodeURIComponent(window._vurl)||""}:{target:d};a.pageX=a.pageX||0,g.px=Math.round(a.pageX*f/e),g.py=a.pageY||0,cpos&&(g.cpos=cpos),$extend(g,JD.report.data.getLogParam()),window.lg&&lg("log_type","1.0",g),JD.report.data.clickBI(g)}})}}function g(a){function b(){var a="",b=[],c="",d=$getCookie("PPRD_P")||"",e={EA:/EA\.(\d+)\.(\d+)\.(\d+)/gim,IA:/IA\.(\d+)\.(\d+)\.(\d+)/gim,CT:/CT\.(\d+)\.(\d+)\.(\d+)/gim,PD:/PD\.(\d+)\.(\d+)\.(\d+)/gim};if(d.length){for(var f in e)a=e[f],c=d.match(a),c&&c.length&&b.push(c[0]);return b.join("-")}return""}function c(){var b,c,d=JD.report.data.titleMap;if(a.vurl)for(c in d)if(a.vurl.indexOf(c)>-1){b=d[c];break}return b||document.title||""}for(var d=[/^http:\/\/wqs\.jd\.com\/my\/fav*/g,/^http:\/\/wq\.jd\.com\/mshop*/g,/^http:\/\/wqs\.jd\.com\/shopping*/g],e=location.href,f=!1,g=0,h=d.length;h>g;g++)if(d[g].test(e)){f=!0;break}if(f){var i=this,j=location.href,k=/^(http:\/\/wq\.jd\.com\/item\/view|http:\/\/wqs\.jd\.com\/app\/item\/style10\/detail\.shtml)/.test(j),l=/^(http:\/\/wqs\.jd\.com\/order\/paysuc\.shtml|http:\/\/wqs\.jd\.com\/order\/paysuc_app\.shtml)/.test(j),m={};a=a||{},window.jap={autoLogPv:window.MANUAL_PV?0:1,topic:"traffic-wq",account:$getCookie("jdpin")||"",skuid:"",shopid:"",orderid:"",adsCookieName:"",heatmapEnable:0,jumpAppEnable:0,openJA:1,__cookie_jda:"__tra",__cookie_jdu:"__tru",extParams:{}},jap.siteId=i.isFsApp?"JA2015_471191":"MO_J2011-2",jap.jumpAppEnable=i.isFsApp?1:0,window._SHOP_DATA&&(jap.shopid=_SHOP_DATA.shopid),k&&(jap.skuid=$getQuery("skuid")),l&&(jap.orderid=$getQuery("dealId")),m.sid=$getCookie("visitkey")||"",m.visitkey=$getCookie("visitkey")||"",m.cookie_ptag=b(),m.wq_version=$getCookie("wq_version")||JD.report.data.getPPRD_PValue("WQVERSION")||"",a.title=c(),$extend(jap.extParams,a),$extend(jap.extParams,m),$extend(jap.extParams,JD.report.data.getLogParam(!0)),k&&JD.report.data.setPPRD_PValue("LOGID",jap.extParams.logid),window.__logid=jap.extParams.logid;var n=window._itemDetail||window._itemDeatail;n&&n&&n.setShareConfig(),window._SHOP_DATA&&window._SHOP_DATA.venderId&&(jap.extParams.vender_id=window._SHOP_DATA.venderId),window.MANUAL_PV?$delayFn("lgPv",jap.extParams):$loadJs("http://misc.360buyimg.com/jdf/1.0.0/unit/ja/1.0.0/ja.js")}}a.ja2={log:b,trace:e,logJSON:c,jdClickReport:f,logGoodsExposure:d},a.jdPvLog2=g}(window,document),window.JD=window.JD||{},JD.report=JD.report||{},JD.report.data=JD.report.data||{},$extend(JD.report.data,{sw:window.screen.width,sh:window.screen.height,nw:640,curl:"",now:Date.now(),isFsApp:/JZYC/gi.test(navigator.userAgent),isSynFootInfo:!1,isPortalPage:!1,hasBindOnTouch:!1,curDomain:"jd.com",titleMap:{"http://wq.jd.com/mcoss/mportal/wxindex":"新首页","http://wq.jd.com/mcoss/mportal/xin":"首发","http://wq.jd.com/mcoss/mportal/brand":"品牌","http://wq.jd.com/portal/wx/brand_detail":"品牌二级页","http://wq.jd.com/mcoss/mportal/juhui":"特价","http://wq.jd.com/mcoss/mportal/chaoshi":"超市","http://wq.jd.com/sq/portal/pinpai":"惠品牌","http://wq.jd.com/portal/sq/brand_detail":"惠品牌二级页","http://wq.jd.com/mcoss/mmart/mshow/chaohuansuan":"超划算"},perfmanCgi:"http://wq.jd.com/mcoss/rpds/rp?rpid=16&val=",pvBINewCgi:"http://wq.jd.com/mcoss_sl/biacc/report?type=1&val=",clickBINewCgi:"http://wq.jd.com/mcoss_sl/biacc/report?type=2&val=",setVKCgi:"http://wq.jd.com/mlogin/pvlog/set_visitkey?from_domain=jd&callback=loadPPVisitKey&_t="+Math.random()}),JD.report.data.logid=JD.report.data.now+"."+Math.round(2147483647*Math.random()),JD.report.data.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},JD.report.data.registerUnloadEvent=function(){function a(){var a=JD.report.data.perfmanCgi,b=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,c=jdtj.et-jdtj.st,d=[];d.push(window.jdPvLog2.envData.logid,c>0?c:0,Date.now()-jdtj.et,b+JD.report.data.sh,1);var e=new Image(1,1);e.src=a+d.join("$")+"&_t="+Date.now(),window._mercury_head_img=e,d[4]=2,$setCookie("_tj_rpds",d.join("$"),4320,"/","jd.com")}JD.report.data.addEvent(window,"unload",a)},JD.report.data.initSynIFrame=function(){1==window.MANUAL_PV&&this.synFootInfo()},JD.report.data.synCookiePtag=function(a){a.vurl&&(window._vurl=a.vurl),!a.notNeedPvReport&&window.jdPvLog2({vurl:window._vurl})},JD.report.data.synFootInfo=function(){return},JD.report.data.setInfoToCookie=function(){{var a=this,b={},c=$getQuery("DAP"),d=$getQuery("pps"),e=$getQuery("WDSTAG"),f=$getQuery("wq_version"),g=$getQuery("GROUP");$getCookie("__jda")}c&&(b.DAP=c),/FOCUS\.(.*)/gi.test(d)?b.FOCUS=RegExp.$1:/MART\.(.*)/gi.test(d)&&(b.MART=RegExp.$1),e&&(b.WDSTAG=e),f&&(b.WQVERSION=f),g&&(b.GROUP=g),a.initOther(),a.setPPRD_PValue(b),!a.isPortalPage&&a.setPtag(),a.needReportAdAgain(function(){a.dealUUID()})},JD.report.data.initOther=function(){var a=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,b=a?"open_id":"sq_open_id",c=$getCookie(b);c&&localStorage.setItem("_tj_"+b,c)},JD.report.data.setVisitkey=function(a){function b(a){return""!=a&&/\d+/.test(a)&&a>4294967295}function c(a,b){!b&&$setCookie("visitkey",a,5256e4,"/",e.curDomain)}var d="",e=this;return d=$getQuery("visitkey"),b(d)?(c(d),void a()):(d=$getCookie("visitkey"),b(d)?(c(d,!0),void a()):(window.loadPPVisitKey=function(b){b&&b.visitkey&&(c(b.visitkey),a())},void $loadUrl({url:this.setVKCgi})))},JD.report.data.setPtag=function(a){var b,c,d="",e=this,f=/PTAG[=,](\d+)\.(\d+)\.(\d+)\D?/gim,g=f.exec(a&&"ptag="+a||location.href.toString());if(!(null==g||4!=g.length||g[1]<0||g[2]<0||g[3]<0)){switch(b=g[1],c=g[1]+"."+g[2]+"."+g[3],!0){case b>=17001&&2e4>b:d="EA";break;case b>=27001&&3e4>b:d="IA";break;case b>=37001&&4e4>b:d="CT";break;case b>=47001&&5e4>b:d="PD";break;default:d=""}d&&e.setPPRD_PValue(d,c)}},JD.report.data.setPPRD_PValue=function(a,b){function c(a,b){var c=a+"."+b,d={EA:/EA\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,IA:/IA\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,CT:/CT\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,PD:/PD\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,DAP:/DAP\.([^-]*)(-?)/gim,FOCUS:/FOCUS\.([^-]*)(-?)/gim,MART:/MART\.([^-]*)(-?)/gim,QZGDT:/QZGDT\.([^\.\-]+)(-?)/gim,QZZTC:/QZZTC\.([^\.\-]+)(-?)/gim,ADKEY:/ADKEY\.([^\.\-]+)(-?)/gim,UUID:/UUID\.([^\.\-]+)(-?)/gim,WDSTAG:/WDSTAG\.([^-]*)(-?)/gim,WQVERSION:/WQVERSION\.([^\.\-]+)(-?)/gim,GROUP:/GROUP\.([^\.\-]+)(-?)/gim,LOGID:/LOGID\.([^-]*)(-?)/gim},e=d[a];e.test(f)?f="EA"==a||"IA"==a||"CT"==a||"PD"==a?f.replace(e,c+"$4"):f.replace(e,c+"$2"):f+=0==f.length?c:"-"+c}function d(){f=f.replace(/-?UUID\.-/g,"-").replace(/^-|-UUID\.$/g,"").replace(/-+/g,"-")}var e="object"==typeof a,f=$getCookie("PPRD_P")||"";if(e){for(var g in a)c(g,a[g]);d(),$setCookie("PPRD_P",f,4320,"/",this.curDomain)}else c(a,b),d(),$setCookie("PPRD_P",f,4320,"/",this.curDomain)},JD.report.data.getPPRD_PValue=function(a){var b={QZGDT:/QZGDT\.([^\.\-]+)/gim,QZZTC:/QZZTC\.([^\.\-]+)/gim,ADKEY:/ADKEY\.([^\.\-]+)/gim,UUID:/UUID\.([^\.\-]+)/gim,WQVERSION:/WQVERSION\.([^\.\-]+)/gim},c=$getCookie("PPRD_P")||"",d=Array.isArray(a),e={};return a=d?a:[a],c&&a.forEach(function(a){b[a]&&b[a].test(c)&&(e[a]=RegExp.$1||"")}),d?e:e[a[0]]},JD.report.data.getLogParam=function(a){if(arguments.callee.logParam)a&&(this.now=Date.now(),this.logid=this.now+"."+Math.round(2147483647*Math.random()),arguments.callee.logParam.logid=this.logid);else{var b=this.isFsApp?"fsapp":"";b=b||window.FOOTDETECT&&window.FOOTDETECT.scene||(c.indexOf("micromessenger")>-1?"weixin":/qq\/([\d\.]+)*/.test(c)?"qq":"mobile");var c=navigator.userAgent.toLowerCase(),d=$getCookie("network")||3,e="weixin"==b?"open_id":"sq_open_id",f={logid:this.logid,wq_unionid:$getCookie("wq_unionid")||"",uuid:this.getPPRD_PValue("UUID")||"",jd_uuid:$getCookie("__jda")?$getCookie("__jda").split(".")[1]:"",chan_type:{weixin:1,qq:2,mobile:3,fsapp:4}[b]||3,net_type:{wifi:1,"2G":2,"3G":2}[d]||3,pinid:$getCookie("pinId")||$getCookie("pinid")||"",wid:$getCookie("buy_uin")||"",openid:localStorage.getItem("_tj_"+e)||$getCookie(e)||""};this.isFsApp&&window.WQAPI&&window.WQAPI.device&&window.WQAPI.device.appVersion&&(f.browser+="_weixindress/"+(window.WQAPI.device.appVersion()||0),f.clientid=$getCookie("clientid")||"",$getCookie("loginType")&&(f.loginType=$getCookie("loginType")),$getCookie("pinType")&&(f.pinType=$getCookie("pinType"))),arguments.callee.logParam=f}return arguments.callee.logParam},JD.report.data.needReportAdAgain=function(a){window.getRptTraceInfo=function(c){if(c&&c.__jda&&c[f]){var d={};c.__jda=decodeURIComponent(c.__jda),c[f]=decodeURIComponent(c[f]),$setCookie("__jda",c.__jda,259200,"","jd.com"),d[j[f]]=c[f],d.ADKEY=k[f],b.setPPRD_PValue(d),$delCookie("tjhelper","/","jd.com"),a&&a.call(b)}};var b=this,c=/micromessenger(\/[\d\.]+)*/.test(navigator.userAgent.toLowerCase()),d="",e="",f="",g=$getCookie("__jda")||"",h=$getCookie("tjhelper")||"",i=decodeURIComponent(h).match(/(gdt_vid|qz_express|qz_gdt)=([^&#]*)/),j={gdt_vid:"QZGDT",qz_gdt:"QZGDT",qz_express:"QZZTC"},k={gdt_vid:"1",qz_gdt:"2",qz_express:"3"};h?(d=c?"open_id":"sq_open_id",e=localStorage.getItem("_tj_"+d)||$getCookie(d)||"",e=e?c?"&wxoid="+e:"&sqoid="+e:e,f=i?i[1]||"":"",i=i?"&"+i[0]:"",$loadUrl({url:"http://zt.jd.com/tws/traceinfomap/rptTraceInfo?__jda="+g+i+e+"&_t="+Date.now()+"&turl="+h})):a&&a.call(b)},JD.report.data.dealUUID=function(){var a=this,b=$getCookie("__jda")||"",c="",d=a.getPPRD_PValue("UUID")||"",e="",f="",g=$getCookie("visitkey");if(b){if(c=b.split("."),c=c?c[1]:"",""==d)return void a.setPPRD_PValue("UUID",c);c!=d&&(f="uuidnotsame=yes",f+="$chan_type="+a.getLogParam().chan_type,e="http://wq.jd.com/data/pvsend/pvsample?t=-&m=-&pin=-&sid="+g+"&v="+encodeURIComponent(f)+"&url="+encodeURIComponent(location.href.toString())+"&ref="+(encodeURIComponent(document.referrer)||"-")+"&rm="+Date.now(),$report(e))}},JD.report.data.pvBI=function(a){var b=this,c=[],d=$getCookie("wq_uin")||"",e={android:"mid",ios:"ifa"}[b.getUaPlatform()]||"",f={mid:"android",ifa:"ios"}[e]||"",g=window._SHOP_DATA&&window._SHOP_DATA.venderId||"",h=b.getBiPPSDAP(),i=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,j=i?"open_id":"sq_open_id",k=b.pvBINewCgi;c.push(1,"",d,$getCookie("visitkey")||"",d?1:3),c.push(parseInt(new Date/1e3,10),h.itemid,$getQuery("ptag")||$getQuery("PTAG")||"",b.getBiUrlType(1),b.getBiUrlType(2)),c.push(h.policyid,h.msgid,h.sceneid,b.getBiEncUrl(location.href),b.getBiEncUrl(document.referrer)),c.push(localStorage.getItem("_tj_"+j)||$getCookie(j)||"",e,f,g,a.category||""),c.push(a.leaf||""),setTimeout(function(){$report(k+c.join("$")+"&_t="+Date.now())},30)},JD.report.data.clickBI=function(a){var b=this,c=[],d=$getCookie("wq_uin")||"",e={android:"mid",ios:"ifa"}[b.getUaPlatform()]||"",f={mid:"android",ifa:"ios"}[e]||"",g=(a.target.indexOf("http")>-1?$getQuery("ptag",a.target)||$getQuery("PTAG",a.target):a.target)||"",h=a.target.indexOf("http")>-1?a.target:"",i=b.getBiPPSDAP(),j=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,k=j?"open_id":"sq_open_id",l=b.clickBINewCgi;c.push(1,"",d,$getCookie("visitkey")||"",d?1:3),c.push(parseInt(new Date/1e3,10),i.itemid,g,b.getBiUrlType(1),b.getBiUrlType(2)),c.push(i.policyid,i.msgid,i.sceneid,b.getBiEncUrl(location.href),b.getBiEncUrl(document.referrer)),c.push(localStorage.getItem("_tj_"+k)||$getCookie(k)||"",e,f,i.materialid,b.getBiUrlType(3,h)),c.push("","","0",b.getBiEncUrl(h)),setTimeout(function(){$report(l+c.join("$")+"&_t="+Date.now())},30)},JD.report.data.getBiEncUrl=function(a){return a?encodeURIComponent(a.replace(/\|/g,"@@").replace(/\$/g,"**")):""},JD.report.data.getBiUrlType=function(a,b){var c=1==a?"url":2==a?"ref":"";if(3!=a&&arguments.callee[c])return arguments.callee[c];var d=0,e=1==a?location.href:2==a?document.referrer:b,f=this.getLogParam().chan_type;return""==e||3==f||4==f?d=0:0==e.indexOf("http://wq.jd.com/item/view?")?d=1:0==e.indexOf("http://wqs.jd.com/my/cart/jdshopcart.shtml")?d=2:0==e.indexOf("http://wqs.jd.com/search/index.shtml")||0==e.indexOf("http://wqs.jd.com/search/shop_index.shtml")?d=3:0==e.indexOf("http://wq.jd.com/mshop/gethomepage?")&&(d=4),3!=a&&(arguments.callee[c]=d),d},JD.report.data.getBiPPSDAP=function(){if(arguments.callee.PPSDAP)return arguments.callee.PPSDAP;var a=$getQuery("DAP")||"",b=decodeURIComponent($getQuery("pps")||""),c={itemid:"",materialid:"",msgid:"",sceneid:"",policyid:""};return b&&(b=b.split(":"),b=b[1]||"",c.itemid=c.materialid=b.slice(0,8)),a&&(a=a.split(":"),c.msgid=a[0]||"",c.sceneid=a[1]||"",c.policyid=a[2]||""),arguments.callee.PPSDAP=c},JD.report.data.getUaPlatform=function(){var a=navigator.userAgent.toLowerCase(),b=a.match(/android/),c=a.match(/iphone|ipad|ipod/);return b?"android":c?"ios":""},JD.report.data.pv=function(a){window.jdPvLog2(a),that.hasBindOnTouch||(that.hasBindOnTouch=!0)},JD.report.data.pvPortal=function(a){this.isPortalPage=!0,window.ECC_cloud_report_pv&&a&&this.hasBindOnTouch&&this.synCookiePtag(a)},JD.report.data.init=function(){window.MANUAL_PV,this.initSynIFrame()},JD.report.data.init(),window.jdPvLog=function(a){function b(a,b){for(var c in b)a[c]=b[c]}function c(){var a,b,c=ECC.cloud.report.titleMap;if(f.vurl)for(b in c)if(f.vurl.indexOf(b)>-1){a=c[b];break}return a||document.title||""}function d(){var a=$getCookie("source")||"",b=$getQuery("ptag")||$getQuery("PTAG")||"",c={"17054.1.1":101,"17053.1.1":102};return a?($delCookie("source","/","jd.com"),a):(a=c[b])?a:f.vurl?a=h:h?a=h:(a=encodeURIComponent(document.referrer||""),a||(b.indexOf("17005")>-1?a=5:b.indexOf("17006")>-1&&(a=6)),a)}function e(){var a="",b=[],c="",d=$getCookie("PPRD_P")||"",e={EA:/EA\.(\d+)\.(\d+)\.(\d+)/gim,IA:/IA\.(\d+)\.(\d+)\.(\d+)/gim,CT:/CT\.(\d+)\.(\d+)\.(\d+)/gim,PD:/PD\.(\d+)\.(\d+)\.(\d+)/gim};if(d.length){for(var f in e)a=e[f],c=d.match(a),c&&c.length&&b.push(c[0]);return b.join("-")}return""}var f={},g=/^(http:\/\/wq\.jd\.com\/item\/view|http:\/\/wqs\.jd\.com\/app\/item\/style10\/detail\.shtml)/.test(location.href),h=encodeURIComponent($getCookie("_tj_rvurl")||""),i={};if(a=a||{},"[object Object]"=={}.toString.call(a)){ECC.cloud.report.dealShopParams(a),b(f,a),b(f,window.jdPvLog.envData.getLogParam(!0)),f.cookie_ptag=e(),f.wq_version=$getCookie("wq_version")||ECC.cloud.report.getPPRD_PValue("WQVERSION")||"",f.vurl?$setCookie("_tj_rvurl",f.vurl,4320,"/","jd.com"):h&&(f.rvurl=h),f.source=d(),f.title=c(),!f.vurl&&h&&$delCookie("_tj_rvurl","/","jd.com"),i={category:f.category,leaf:f.leaf},delete f.category,delete f.leaf,g&&ECC.cloud.report.setPPRD_PValue("LOGID",f.logid),window.__logid=f.logid;var j=window._itemDetail||window._itemDeatail;j&&j&&j.setShareConfig(),window._SHOP_DATA&&window._SHOP_DATA.venderId&&(f.vender_id=window._SHOP_DATA.venderId),window.ja&&window.ja.log("wg_wx.000000",f),window.ja_data={},ECC.cloud.report.registerUnloadEvent(),ECC.cloud.report.pvBI(i),window.jdPvLog2&&window.jdPvLog2(a)}},function(W,D){function skuRecomExposure(a){a=a||{};var b="",c=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,d=c?"open_id":"sq_open_id",e=["t="+(a.t||"wg_rec.630005"),"m=MO_J2011-2","pin="+$getCookie("jdpin"),"sid="+$getCookie("visitkey")+"|"+G.jda.session_seq,"rm="+Date.now(),"url=","ref="],f=["logid="+G.logid,"os="+G.os,"chan_type="+G.getLogParam().chan_type,"action="+a.action,"expid="+(a.expid||""),"user_type="+($getCookie("jdpin")?1:2),"openid="+(localStorage.getItem("_tj_"+d)||$getCookie(d)||""),"reqsig="+(a.reqsig||""),"index="+(void 0==a.index?"":a.index),"sku_id="+(a.sku_id||"")];b="http://hermes.jd.com/log.gif?"+e.join("&")+"&v="+f.join("$"),$report(b)}function reportSample(a){var b=$getCookie("visitkey")||"";b&&3==b.slice(-1)&&(a="http://wq.jd.com/data/pvsend/pvsample"+a.slice(a.indexOf("?")),$report(a))}function logGoodsExposure(a){var b=window._vurl?{vurl:encodeURIComponent(window._vurl)||""}:{};b.target=a||"",mergeObj(G.getLogParam(),b),log("wg_wx.000003",b)}function trace(a){if("[object Object]"=={}.toString.call(a)){a.vurl&&(window._vurl=a.vurl);var b=window._vurl?{vurl:encodeURIComponent(window._vurl)||""}:{};b.target=a.ptag||"",b.target=b.target.replace("%2524","%40").replace("%24","%40").replace(/\$/g,"%40"),mergeObj(G.getLogParam(),b),mergeObj(a,b),delete b.ptag,log("wg_wx.000001",b),ECC.cloud.report.clickBI(b)}}function jdClickReport(){var a=window.ja_data||{};if(!window.GLOBAL_MANUAL_CLICK&&!a.disable_auto){if(!window.$)return void setTimeout(arguments.callee,40);if("function"!=typeof $(document).tap)return;$("body").on("tap",function(a){for(var b,c=window.ja_data||{},d=a.target,e="",f=ECC.cloud.report.sw,g=ECC.cloud.report.nw,h="";!e&&d&&"BODY"!=d.nodeName&&d.getAttribute&&(!b&&(b=d.getAttribute("manualclick")||d.manualclick||""),!b);)e=d.getAttribute("ptag")||d.getAttribute("PTAG")||d.getAttribute("href")||"",(e&&"#"==e[0]||e.indexOf("javascript")>-1)&&(e=""),e=e||d.getAttribute("data-tourl")||d.getAttribute("tourl")||d.getAttribute("target_href")||"",h=d.getAttribute("cpos")||"",e||(d=d.parentNode);if(!b){e=e||"",e=e.replace("%2524","%40").replace("%24","%40").replace(/\$/g,"%40");var i=window._vurl?{target:e,vurl:encodeURIComponent(window._vurl)||""}:{target:e};a.pageX=a.pageX||0,i.px=Math.round(a.pageX*g/f),i.py=a.pageY||0,h&&(i.cpos=h),mergeObj(G.getLogParam(),i),log("wg_wx.000001",mergeObj(c,i)),ECC.cloud.report.clickBI(i)}})}}var g=void 0,p="push",y="join",s="split",l="length",ind="indexOf",pr="prototype",t="toLowerCase",G={},enc=encodeURIComponent,dec=decodeURIComponent,writeCookie=function(a,b,c,d){a=a+"="+b+"; path=/; ",d&&(a+="expires="+new Date((new Date).getTime()+1e3*d).toGMTString()+"; "),c&&(a+="domain="+c+";"),D.cookie=a},readCookie=function(a){for(var b=a+"=",c=D.cookie.split(";"),d=0,e=c.length;e>d;d++){for(var f=c[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return null},mergeObj=function(a,b){a=a||{},b=b||{};for(var c in a)b[c]=a[c];return b},sendLog=function(t,vsstring){var traceurl=("https:"==D.location.protocol?"https://mercuryssl":"http://hermes")+".jd.com/log.gif?t="+t+"&m=MO_J2011-2&pin="+enc(eval("'"+unescape(readCookie("jdpin")||"-")+"'"))+"&sid="+readCookie("visitkey")+"|"+G.jda.session_seq+"&v="+enc(vsstring)+"&url="+enc(ECC.cloud.report.curl||W.location.href)+"&ref="+(enc(D.referrer)||$getQuery("wdref")||"")+"&rm="+(new Date).getTime();$report(traceurl),"wg_wx.000000"==t&&reportSample(traceurl)},log=function(a,b){var c="",b=b||{};for(var d in b)c+=d+"="+b[d]+"$";c+="fst="+G.jda.first_session_time+"$",c+="pst="+G.jda.prev_session_time+"$",c+="vct="+G.jda.now_session_time+"$",c+="visit_times="+G.jda.page_seq+"$",c=c.substring(0,c.length-1),sendLog(a,c)},logJSON=function(a,b,c){var d=G.getLogParam(),e={chan_type:d.chan_type,pinid:d.pinid,wid:d.wid,logid:G.logid,ver:b,fst:G.jda.first_session_time,pst:G.jda.prev_session_time,vct:G.jda.now_session_time,visit_times:G.jda.page_seq,v:c};e.v=e.v||{},ECC.cloud.report.isFsApp&&(e.v.clientid=$getCookie("clientid")||""),sendLog(a,JSON.stringify(e))};G.now=Date.now(),G.logid=G.now+"."+Math.round(2147483647*Math.random()),G.domain=function(){return r=/\w+.(com\.cn|com|net|cn)/.exec(document.domain[t]()),r.length?r[0]:"jd.com"}(),G.jda=function(){var a=readCookie("__wga"),a=a?a.split("."):[],b={},c=a[0]&&G.now-a[0]<=1800;return b.now=G.now,b.now_session_time=c&&a[1]?a[1]:b.now,b.prev_session_time=a[2]?c?a[2]:a[1]?a[1]:b.now:b.now,b.first_session_time=a[3]?a[3]:b.now,b.page_seq=c&&a[4]?1*a[4]+1:1,b.session_seq=a[5]?c?a[5]:1*a[5]+1:1,a=b.now+"."+b.now_session_time+"."+b.prev_session_time+"."+b.first_session_time+"."+b.page_seq+"."+b.session_seq,writeCookie("__wga",a,G.domain,31536e3),b}(),G.screen=function(){var a={},b=W.screen;return a.size=b?b.width+"x"+b.height:"-",a.color=b?b.colorDepth+"-bit":"-",a}(),G.browser=function(){var a={name:"other",version:"0"},b=navigator.userAgent[t](),c=W.navigator;browserRegExp={se360:/360se/,se360_2x:/qihu/,ie:/msie[ ]([\w.]+)/,firefox:/firefox[|\/]([\w.]+)/,chrome:/chrome[|\/]([\w.]+)/,safari:/version[|\/]([\w.]+)(\s\w.+)?\s?safari/,opera:/opera[|\/]([\w.]+)/,webkit:/applewebkit\/([\w.]+)/};for(var d in browserRegExp){var e=browserRegExp[d].exec(b);if(e){a.name=d,a.version=e[1]||"0";break}}return a.language=(c&&(c.language||c.browserLanguage)||"-")[t](),a.javaEnabled=c&&c.javaEnabled()?1:0,a.characterSet=D.characterSet||D.charset||"-",a}(),G.os=function(){var a=navigator.userAgent,b={},c=a.match(/(Android);?[\s\/]+([\d.]+)?/),d=a.match(/(iPad).*OS\s([\d_]+)/),e=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&a.match(/(iPhone\sOS)\s([\d_]+)/);c&&(b.android=!0,b.version=c[2]),f&&!e&&(b.ios=!0,b.version=f[2].replace(/_/g,".")),d&&(b.ios=!0,b.version=d[2].replace(/_/g,".")),e&&(b.ios=!0,b.version=e[3]?e[3].replace(/_/g,"."):null),b.android||b.ios||(b.other="");var g="";for(var h in b)"version"!=h&&(g=h+"/"+(b.version||""));return g}(),G.getLogParam=function(a){if(arguments.callee.logParam)a&&(G.now=Date.now(),G.logid=G.now+"."+Math.round(2147483647*Math.random()),arguments.callee.logParam.logid=G.logid);else{var b=ECC.cloud.report.isFsApp?"fsapp":"";b=b||window.FOOTDETECT&&window.FOOTDETECT.scene||(c.indexOf("micromessenger")>-1?"weixin":/qq\/([\d\.]+)*/.test(c)?"qq":"mobile");var c=navigator.userAgent.toLowerCase(),d=$getCookie("network")||3,e="weixin"==b?"open_id":"sq_open_id",f={logid:G.logid,wq_unionid:$getCookie("wq_unionid")||"",uuid:ECC.cloud.report.getPPRD_PValue("UUID")||"",jd_uuid:$getCookie("__jda")?$getCookie("__jda").split(".")[1]:"",chan_type:{weixin:1,qq:2,mobile:3,fsapp:4}[b]||3,net_type:{wifi:1,"2G":2,"3G":2}[d]||3,pinid:$getCookie("pinId")||$getCookie("pinid")||"",wid:$getCookie("buy_uin")||"",openid:localStorage.getItem("_tj_"+e)||$getCookie(e)||"",screen:G.screen.size,color:G.screen.color,os:G.os,browser:G.browser.name+"/"+G.browser.version};ECC.cloud.report.isFsApp&&window.WQAPI&&window.WQAPI.device&&window.WQAPI.device.appVersion&&(f.browser+="_weixindress/"+(window.WQAPI.device.appVersion()||0),f.clientid=$getCookie("clientid")||"",$getCookie("loginType")&&(f.loginType=$getCookie("loginType")),$getCookie("pinType")&&(f.pinType=$getCookie("pinType"))),arguments.callee.logParam=f}return arguments.callee.logParam},W.ja={log:log,trace:trace,logJSON:logJSON,jdClickReport:jdClickReport,logGoodsExposure:logGoodsExposure,skuRecomExposure:skuRecomExposure},W.jdPvLog.envData=G}(window,document),$namespace("ECC.cloud.report"),ECC.cloud.report={sw:window.screen.width,sh:window.screen.height,nw:640,curl:"",isFsApp:/JZYC/gi.test(navigator.userAgent),isSynFootInfo:!1,isPortalPage:!1,hasBindOnTouch:!1,curDomain:"jd.com",titleMap:{"http://wq.jd.com/mcoss/mportal/wxindex":"新首页","http://wq.jd.com/mcoss/mportal/xin":"首发","http://wq.jd.com/mcoss/mportal/brand":"品牌","http://wq.jd.com/portal/wx/brand_detail":"品牌二级页","http://wq.jd.com/mcoss/mportal/juhui":"特价","http://wq.jd.com/mcoss/mportal/chaoshi":"超市","http://wq.jd.com/sq/portal/pinpai":"惠品牌","http://wq.jd.com/portal/sq/brand_detail":"惠品牌二级页","http://wq.jd.com/mcoss/mmart/mshow/chaohuansuan":"超划算"},perfmanCgi:"http://wq.jd.com/mcoss/rpds/rp?rpid=16&val=",pvBICgi:"http://wq.jd.com/mcoss/rpds/rp?rpid=11&val=",clickBICgi:"http://wq.jd.com/mcoss/rpds/rp?rpid=12&val=",pvBINewCgi:"http://wq.jd.com/mcoss_sl/biacc/report?type=1&val=",clickBINewCgi:"http://wq.jd.com/mcoss_sl/biacc/report?type=2&val=",setVKCgi:"http://wq.jd.com/mlogin/pvlog/set_visitkey?from_domain=jd&callback=loadPPVisitKey&_t="+Math.random()},ECC.cloud.report.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},ECC.cloud.report.registerUnloadEvent=function(){function a(){var a=ECC.cloud.report.perfmanCgi,b=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,c=jdtj.et-jdtj.st,d=[];d.push(window.jdPvLog.envData.logid,c>0?c:0,Date.now()-jdtj.et,b+ECC.cloud.report.sh,1);var e=new Image(1,1);e.src=a+d.join("$")+"&_t="+Date.now(),window._mercury_head_img=e,d[4]=2,$setCookie("_tj_rpds",d.join("$"),4320,"/","jd.com")}ECC.cloud.report.addEvent(window,"unload",a)},ECC.cloud.report.init=function(){this.initSynIFrame()},ECC.cloud.report.initSynIFrame=function(){1==window.MANUAL_PV&&this.synFootInfo()},ECC.cloud.report.pv=function(a){1!=window.ECC_cloud_report_pv&&(a&&a.ptag&&this.hasBindOnTouch?this.synCookiePtag(a):this.synFootInfo())},ECC.cloud.report.pvPortal=function(a){this.isPortalPage=!0,window.ECC_cloud_report_pv&&a&&this.hasBindOnTouch&&this.synCookiePtag(a)},ECC.cloud.report.synCookiePtag=function(a){a.ptag&&this.setPtag(a.ptag),a.vurl&&(window._vurl=a.vurl),!a.notNeedPvReport&&window.jdPvLog({vurl:window._vurl})},ECC.cloud.report.trace=function(){},ECC.cloud.report.doReport=function(){},ECC.cloud.report.synFootInfo=function(){var a=this;this.isSynFootInfo||(this.isSynFootInfo=!0,this.setInfoToCookie(),this.setVisitkey(function(){a.isSynFootInfo=!1,"function"==typeof window.__footSynIframeCbk&&window.__footSynIframeCbk(),window.ECC_cloud_report_pv=!0,!window.MANUAL_PV&&window.jdPvLog(window.ja_data),a.hasBindOnTouch||(a.hasBindOnTouch=!0,window.ja.jdClickReport())}))},ECC.cloud.report.setInfoToCookie=function(){{var a=this,b={},c=$getQuery("DAP"),d=$getQuery("pps"),e=$getQuery("WDSTAG"),f=$getQuery("wq_version"),g=$getQuery("GROUP");$getCookie("__jda")}c&&(b.DAP=c),/FOCUS\.(.*)/gi.test(d)?b.FOCUS=RegExp.$1:/MART\.(.*)/gi.test(d)&&(b.MART=RegExp.$1),e&&(b.WDSTAG=e),f&&(b.WQVERSION=f),g&&(b.GROUP=g),a.initOther(),a.setPPRD_PValue(b),!a.isPortalPage&&a.setPtag(),a.needReportAdAgain(function(){a.dealUUID()})},ECC.cloud.report.initOther=function(){var a=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,b=a?"open_id":"sq_open_id",c=$getCookie(b);c&&localStorage.setItem("_tj_"+b,c)},ECC.cloud.report.setPtag=function(a){var b,c,d="",e=this,f=/PTAG[=,](\d+)\.(\d+)\.(\d+)\D?/gim,g=f.exec(a&&"ptag="+a||location.href.toString());if(!(null==g||4!=g.length||g[1]<0||g[2]<0||g[3]<0)){switch(b=g[1],c=g[1]+"."+g[2]+"."+g[3],!0){case b>=17001&&2e4>b:d="EA";break;case b>=27001&&3e4>b:d="IA";break;case b>=37001&&4e4>b:d="CT";break;case b>=47001&&5e4>b:d="PD";break;default:d=""}d&&e.setPPRD_PValue(d,c)}},ECC.cloud.report.setPPRD_PValue=function(a,b){function c(a,b){var c=a+"."+b,d={EA:/EA\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,IA:/IA\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,CT:/CT\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,PD:/PD\.(\d+)\.(\d+)\.(\d+)(\D?)/gim,DAP:/DAP\.([^-]*)(-?)/gim,FOCUS:/FOCUS\.([^-]*)(-?)/gim,MART:/MART\.([^-]*)(-?)/gim,QZGDT:/QZGDT\.([^\.\-]+)(-?)/gim,QZZTC:/QZZTC\.([^\.\-]+)(-?)/gim,ADKEY:/ADKEY\.([^\.\-]+)(-?)/gim,UUID:/UUID\.([^\.\-]+)(-?)/gim,WDSTAG:/WDSTAG\.([^-]*)(-?)/gim,WQVERSION:/WQVERSION\.([^\.\-]+)(-?)/gim,GROUP:/GROUP\.([^\.\-]+)(-?)/gim,LOGID:/LOGID\.([^-]*)(-?)/gim},e=d[a];e.test(f)?f="EA"==a||"IA"==a||"CT"==a||"PD"==a?f.replace(e,c+"$4"):f.replace(e,c+"$2"):f+=0==f.length?c:"-"+c}function d(){f=f.replace(/-?UUID\.-/g,"-").replace(/^-|-UUID\.$/g,"").replace(/-+/g,"-")}var e="object"==typeof a,f=$getCookie("PPRD_P")||"";if(e){for(var g in a)c(g,a[g]);d(),$setCookie("PPRD_P",f,4320,"/",this.curDomain)}else c(a,b),d(),$setCookie("PPRD_P",f,4320,"/",this.curDomain)},ECC.cloud.report.getPPRD_PValue=function(a){var b={QZGDT:/QZGDT\.([^\.\-]+)/gim,QZZTC:/QZZTC\.([^\.\-]+)/gim,ADKEY:/ADKEY\.([^\.\-]+)/gim,UUID:/UUID\.([^\.\-]+)/gim,WQVERSION:/WQVERSION\.([^\.\-]+)/gim},c=$getCookie("PPRD_P")||"",d=Array.isArray(a),e={};return a=d?a:[a],c&&a.forEach(function(a){b[a]&&b[a].test(c)&&(e[a]=RegExp.$1||"")}),d?e:e[a[0]]},ECC.cloud.report.setVisitkey=function(a){function b(a){return""!=a&&/\d+/.test(a)&&a>4294967295}function c(a,b){!b&&$setCookie("visitkey",a,5256e4,"/",e.curDomain)}var d="",e=this;return d=$getQuery("visitkey"),b(d)?(c(d),void a()):(d=$getCookie("visitkey"),b(d)?(c(d,!0),void a()):(window.loadPPVisitKey=function(b){b&&b.visitkey&&(c(b.visitkey),a())},void $loadUrl({url:this.setVKCgi})))},ECC.cloud.report.needReportAdAgain=function(a){window.getRptTraceInfo=function(c){if(c&&c.__jda&&c[f]){var d={};c.__jda=decodeURIComponent(c.__jda),c[f]=decodeURIComponent(c[f]),$setCookie("__jda",c.__jda,259200,"","jd.com"),d[j[f]]=c[f],d.ADKEY=k[f],b.setPPRD_PValue(d),$delCookie("tjhelper","/","jd.com"),a&&a.call(b)}};var b=this,c=/micromessenger(\/[\d\.]+)*/.test(navigator.userAgent.toLowerCase()),d="",e="",f="",g=$getCookie("__jda")||"",h=$getCookie("tjhelper")||"",i=decodeURIComponent(h).match(/(gdt_vid|qz_express|qz_gdt)=([^&#]*)/),j={gdt_vid:"QZGDT",qz_gdt:"QZGDT",qz_express:"QZZTC"},k={gdt_vid:"1",qz_gdt:"2",qz_express:"3"};h?(d=c?"open_id":"sq_open_id",e=localStorage.getItem("_tj_"+d)||$getCookie(d)||"",e=e?c?"&wxoid="+e:"&sqoid="+e:e,f=i?i[1]||"":"",i=i?"&"+i[0]:"",$loadUrl({url:"http://zt.jd.com/tws/traceinfomap/rptTraceInfo?__jda="+g+i+e+"&_t="+Date.now()+"&turl="+h})):a&&a.call(b)
},ECC.cloud.report.dealUUID=function(){var a=this,b=$getCookie("__jda")||"",c="",d=a.getPPRD_PValue("UUID")||"",e="",f="",g=$getCookie("visitkey");if(b){if(c=b.split("."),c=c?c[1]:"",""==d)return void a.setPPRD_PValue("UUID",c);c!=d&&(f="uuidnotsame=yes",f+="$chan_type="+window.jdPvLog.envData.getLogParam().chan_type,e="http://wq.jd.com/data/pvsend/pvsample?t=-&m=-&pin=-&sid="+g+"&v="+encodeURIComponent(f)+"&url="+encodeURIComponent(location.href.toString())+"&ref="+(encodeURIComponent(document.referrer)||"-")+"&rm="+Date.now(),$report(e))}},ECC.cloud.report.pvBI=function(a){var b=this,c=[],d=$getCookie("wq_uin")||"",e={android:"mid",ios:"ifa"}[b.getUaPlatform()]||"",f={mid:"android",ifa:"ios"}[e]||"",g=window._SHOP_DATA&&window._SHOP_DATA.venderId||"",h=b.getBiPPSDAP(),i=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,j=i?"open_id":"sq_open_id",k=b.pvBINewCgi;c.push(1,"",d,$getCookie("visitkey")||"",d?1:3),c.push(parseInt(new Date/1e3,10),h.itemid,$getQuery("ptag")||$getQuery("PTAG")||"",b.getBiUrlType(1),b.getBiUrlType(2)),c.push(h.policyid,h.msgid,h.sceneid,b.getBiEncUrl(location.href),b.getBiEncUrl(document.referrer)),c.push(localStorage.getItem("_tj_"+j)||$getCookie(j)||"",e,f,g,a.category||""),c.push(a.leaf||""),setTimeout(function(){$report(k+c.join("$")+"&_t="+Date.now())},30)},ECC.cloud.report.clickBI=function(a){var b=this,c=[],d=$getCookie("wq_uin")||"",e={android:"mid",ios:"ifa"}[b.getUaPlatform()]||"",f={mid:"android",ifa:"ios"}[e]||"",g=(a.target.indexOf("http")>-1?$getQuery("ptag",a.target)||$getQuery("PTAG",a.target):a.target)||"",h=a.target.indexOf("http")>-1?a.target:"",i=b.getBiPPSDAP(),j=navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1,k=j?"open_id":"sq_open_id",l=b.clickBINewCgi;c.push(1,"",d,$getCookie("visitkey")||"",d?1:3),c.push(parseInt(new Date/1e3,10),i.itemid,g,b.getBiUrlType(1),b.getBiUrlType(2)),c.push(i.policyid,i.msgid,i.sceneid,b.getBiEncUrl(location.href),b.getBiEncUrl(document.referrer)),c.push(localStorage.getItem("_tj_"+k)||$getCookie(k)||"",e,f,i.materialid,b.getBiUrlType(3,h)),c.push("","","0",b.getBiEncUrl(h)),setTimeout(function(){$report(l+c.join("$")+"&_t="+Date.now())},30)},ECC.cloud.report.getBiEncUrl=function(a){return a?encodeURIComponent(a.replace(/\|/g,"@@").replace(/\$/g,"**")):""},ECC.cloud.report.getBiUrlType=function(a,b){var c=1==a?"url":2==a?"ref":"";if(3!=a&&arguments.callee[c])return arguments.callee[c];var d=0,e=1==a?location.href:2==a?document.referrer:b,f=window.jdPvLog.envData.getLogParam().chan_type;return""==e||3==f||4==f?d=0:0==e.indexOf("http://wq.jd.com/item/view?")?d=1:0==e.indexOf("http://wqs.jd.com/my/cart/jdshopcart.shtml")?d=2:0==e.indexOf("http://wqs.jd.com/search/index.shtml")||0==e.indexOf("http://wqs.jd.com/search/shop_index.shtml")?d=3:0==e.indexOf("http://wq.jd.com/mshop/gethomepage?")&&(d=4),3!=a&&(arguments.callee[c]=d),d},ECC.cloud.report.getBiPPSDAP=function(){if(arguments.callee.PPSDAP)return arguments.callee.PPSDAP;var a=$getQuery("DAP")||"",b=decodeURIComponent($getQuery("pps")||""),c={itemid:"",materialid:"",msgid:"",sceneid:"",policyid:""};return b&&(b=b.split(":"),b=b[1]||"",c.itemid=c.materialid=b.slice(0,8)),a&&(a=a.split(":"),c.msgid=a[0]||"",c.sceneid=a[1]||"",c.policyid=a[2]||""),arguments.callee.PPSDAP=c},ECC.cloud.report.getUaPlatform=function(){var a=navigator.userAgent.toLowerCase(),b=a.match(/android/),c=a.match(/iphone|ipad|ipod/);return b?"android":c?"ios":""},ECC.cloud.report.dealShopParams=function(a){var b=this,c=document.referrer||"",d=$getQuery("url",c)||"",e=$getQuery("WDSTAG")||"",f=[],g=[];c.indexOf("http://mp.weixin.qq.com/mp/redirect?")>-1&&(d=decodeURIComponent(d)||"",g=d.split(/\?/),g[1]=g[1]||"",g[1]=g[1].replace(/WDSTAG=[^#&]*/g,"").replace(/ptag=[^#&]*/gi,""),e=/[&?]venderId=([^&#]*)/gi.test(d)?[1,RegExp.$1,999999999].join("."):a.vender_id?[1,a.vender_id,999999999].join("."):[1,999999999,999999999].join("."),f.WDSTAG=e,b.setPPRD_PValue(f),g[1]="WDSTAG="+e+"&"+g[1],b.setPtag("17048.2.2"),g[1]="ptag=17048.2.2&"+g[1],a.vptag="17048.2.2",d=g.join("?").replace(/&#/,"#").replace(/&$/,"").replace(/&+/g,"&"),b.curl=d),a.WDSTAG=e},ECC.cloud.report.init();!function(){function a(a){var b="_SPEEDPOINT"+Math.random();window[b]=new Image,window[b].src=a}function b(b){function c(a){a&&(a=a.toLowerCase(),"wifi"==a?d(g[0],g[1],g[2],a):"2g"==a||"3g"==a?d(g[3],g[4],g[5],a):"4g"==a||"3g+"==a?g.length>9&&d(g[9],g[10],g[11],a):d(g[6],g[7],g[8],a))}function d(b,c,d,f){for(var g={flag1:b,flag2:c,flag3:d},j=1;j<e.length;j++)e[j]&&(g[j]=e[j]-e[0][0]);i.t=Math.random(),f&&(i.apn=f),i.speedparams=k(g),a(h+"?"+k(i)),e.hasReport=!0}var e=b||window.speedTimePoint,f=0;if(e&&-1!==e.rptTime&&!e.hasReport&&!window.MANUAL_SPEED&&!e.manualReport&&e.huatuoReport){var g=e[0].slice(1),h="http://report.huatuo.qq.com/report.cgi",i={appid:20001,appkey:"",speedparams:null,platform:m.os?m.os.replace(/%20/g,""):"other",t:0};e.rptTime>0&&(f=e.rptTime),setTimeout(function(){e.diffNetwork?JD.device.getNetwork(function(a){c(a)}):d(g[0],g[1],g[2])},f)}}function c(){if(window.performanceTimePoint){var b,c,d,e,f=window.performanceTimePoint,g=window.webkitPerformance||window.performance,h=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];if(g&&(b=g.timing)){e={flag1:f[0],flag2:f[1],flag3:f[2]},c=b[h[0]];for(var i=1,j=h.length;j>i;i++)d=b[h[i]],d=d?d-c:0,d>0&&(e[i]=d);var l={appid:20001,appkey:"",speedparams:k(e),platform:m.os?m.os.replace(/%20/g,""):"other",apn:JD.cookie.get("network"),t:Math.random()};a("http://report.huatuo.qq.com/report.cgi?"+k(l))}}}function d(){var b=JD.url.getUrlParam("pps");b&&a("http://wq.jd.com/mcoss/rpds/report?pps="+b+"&t="+Math.random())}function e(){function a(a){for(var b=a.target,c=0;b&&8>c&&"a"!=b.tagName.toLowerCase();)b=b.parentNode,c++;return b}window._useStaticItemLink&&document.body.addEventListener("click",function(b){var c=a(b);c&&"a"==c.tagName.toLowerCase()&&c.href.indexOf("http://wq.jd.com/item/view")>-1&&(c.href=c.href.replace("http://wq.jd.com/item/view","http://wqs.jd.com/item/jd.shtml"))},!1)}function f(){JD.cookie.get("wq_code")&&("weixin"==JD.device.scene&&!JD.cookie.get("open_id")||"qq"==JD.device.scene&&!JD.cookie.get("sq_open_id"))&&a("http://wq.jd.com/mcoss/openid/getopenid?t="+Math.random())}function g(){var a=window.webkitPerformance||window.performance;if(a&&a.getEntriesByType){var b={6:1,8:2,guang_index:3,14:4,5:5,9:6,microstore:7},c="";if("wqs.jd.com"==location.host){var d=location.pathname.match(/\w*(?=\.(shtml|html))/);d&&d.length&&(c=d[0])}else c=JD.url.getUrlParam("tabid");if(c){var e=b[c];if(e){var d=a.getEntriesByType("resource").filter(function(a){return"link"==a.initiatorType});if(d.length){var f=d[0],g=f.duration<5;JD.report.umpBiz({bizid:43,operation:e,result:g?0:1,source:0,message:g?"":"load from server"})}}}}}function h(){var a;if("wqs.jd.com"==location.host){var b=location.pathname.match(/\w*(?=\.(shtml|html))/);b&&b.length&&(a=b[0])}else a=JD.url.getUrlParam("tabid");if(a){var c=["6","8","guang_index","14","5","9","microstore"];if(!(c.indexOf(a)<0)){var d=document.createElement("div");d.className="loadcsstest",document.body.appendChild(d);var e=d.getBoundingClientRect().width;100!=e&&JD.report.umpBiz({bizid:44,operation:1,result:1,source:0,message:"css load failed"}),document.body.removeChild(d)}}}function i(){if(window.JD&&JD.preload)for(var b in JD.preload)JD.preload.hasOwnProperty(b)&&a(JD.preload[b])}function j(){try{var a=navigator.userAgent,b={},c={},d={},e={},f=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),g=a.match(/(Android);?[\s\/]+([\d.]+)?/),h=!!a.match(/\(Macintosh\; Intel /),i=a.match(/(iPad).*OS\s([\d_]+)/),j=a.match(/(iPod)(.*OS\s([\d_]+))?/),k=!i&&a.match(/(iPhone\sOS)\s([\d_]+)/),l=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),m=a.match(/Windows Phone ([\d.]+)/),n=l&&a.match(/TouchPad/),o=a.match(/Kindle\/([\d.]+)/),p=a.match(/Silk\/([\d._]+)/),q=a.match(/(BlackBerry).*Version\/([\d.]+)/),r=a.match(/(BB10).*Version\/([\d.]+)/),s=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),t=a.match(/PlayBook/),u=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),v=a.match(/Firefox\/([\d.]+)/),w=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),x=!u&&a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),y=x||a.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(d.webkit=!!f)&&(d.version=f[1]),g&&(b.android=!0,b.version=g[2]),k&&!j&&(b.ios=e.iphone=!0,b.version=k[2].replace(/_/g,".")),i&&(b.ios=e.ipad=!0,b.version=i[2].replace(/_/g,".")),j&&(b.ios=e.ipod=!0,b.version=j[3]?j[3].replace(/_/g,"."):null),m&&(b.wp=!0,b.version=m[1]),l&&(b.webos=!0,b.version=l[2]),n&&(e.touchpad=!0),q&&(b.blackberry=!0,b.version=q[2]),r&&(b.bb10=!0,b.version=r[2]),s&&(b.rimtabletos=!0,b.version=s[2]),t&&(c.playbook=!0),o&&(b.kindle=!0,b.version=o[1]),p&&(c.silk=!0,c.version=p[1]),!p&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),u&&(c.chrome=!0,c.version=u[1]),v&&(c.firefox=!0,c.version=v[1]),w&&(c.ie=!0,c.version=w[1]),y&&(h||b.ios)&&(c.safari=!0,h&&(c.version=y[1]));var z="Unknown",A="",B="",C="",D=/(^\s+)|(\s+$)/g,E=function(a){return a.trim?a.trim():a.replace(D,"")};for(var F in e)z=F;for(var F in b)"version"!=F&&(A=F+" "+(b.version||""));for(var F in c)"version"!=F&&(B=F+" "+(c.version||""));for(var F in d)"version"!=F&&(C=F+" "+(d.version||""));return B+=" "+C,this.phone=E(z),this.os=E(A),this.browser=E(B).split("  ").join(" "),{os:this.os,browser:this.browser,engine:this.engine,phone:this.device}}catch(C){}}function k(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}function l(){var a=window.objMsgPv||window.objMsg||{};a.p="paipai.com",a.weixin=1,a.retina=window.devicePixelRatio>=1.5?1:0,"qq"===FOOTDETECT.scene?a.client=2001:"weixin"===FOOTDETECT.scene?a.client=1001:(a.client=4001,FOOTDETECT.network="Unknown"),j.call(a);for(var b in a)a[b]=encodeURIComponent(a[b]);return a.network=FOOTDETECT.network||"",a.webp=JD.device.webp,a}var m=l();window.reportPVReady?window.reportPVReady(m,ECC.cloud.report.pv):!window.MANUAL_PV&&window.ECC&&ECC.cloud.report.pv(m),FOOTDETECT.rptPvObj=m,FOOTDETECT.objMsgPv=m,b(),d(),e(),f(),setTimeout(g,200),setTimeout(h,300),setTimeout(i,2e3),setTimeout(c,3e3)}();!function(){function a(){if(window.mqq&&window.mqq.app&&window.mqq.app.isAppInstalled){var a,b=navigator.userAgent.indexOf("Android")>-1;a=b?"com.jingdong.app.mall":"jdMobile";var c=document.getElementById("jdBtmLogo"),d="http://wq.jd.com/mcoss/mportal/show?tabid=6&tpl=7&sid=&ptype=4";window.mqq.app.isAppInstalled(a,function(a){a||(d="http://wqs.jd.com/download_jd.shtml?tab=footlogo ")}),c.addEventListener("click",function(){window.setTimeout(function(){location.href=d},0)})}}var b='<div class="jd_logo" id="jdBtmLogo"></div><div class="qq_info">页面内容由京东提供，正品保障，极速发货。</div>',c=document.createElement("DIV");c.className="qq_footer",c.innerHTML=b,document.body.appendChild(c),!window.mqq||window.mqq.app&&window.mqq.app.isAppInstalled||window.mqq.build("mqq.app.isAppInstalled",{iOS:function(a,b){return mqq.invoke("app","isInstalled",{scheme:a},b)},android:function(a,b){mqq.invoke("QQApi","isAppInstalled",a,b)},support:{iOS:"4.2",android:"4.2"}}),a()}();!function(){function a(){d.check(function(a,c){var d=document.createElement("div"),e=Math.floor(a/60);d.innerHTML='<span class="wx_history_close" id="wx_history_close" ptag="37075.2.3">关闭</span><a ptag="37075.2.2" href="'+c.url+'" ><strong>'+(e>0?e+"分钟前":"刚刚")+"您在浏览：</strong><p>"+b(c.title.replace("搜索到",""))+"</p></a>",d.className="wx_history",document.body.appendChild(d);try{ECC.cloud.report.trace({ptag:"37075.2.1"})}catch(f){}var g=document.getElementById("wx_history_close");g.addEventListener("click",function(){d.style.display="none"}),setTimeout(function(){d.style.display="none"},5e3)})}function b(a){return"string"!=typeof a?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;").replace(/ /g,"&nbsp;")}var c=navigator.userAgent,d={sProxyUrl:"http://wqs.jd.com/portal/wx/storageBridge.shtml",sDomain:"wqs.jd.com",sCacheKey:"jdHistory",oItemStruct:{type:"1",key:"",url:"",title:"",desc:"",img:"",time:""},isAnroid:c.match(/(Android);?[\s\/]+([\d.]+)?/),oCallbacks:{},bIsInitMsg:!1,postMessage:function(a,b,c){var d,e=this,f="cacheProxyIfr",g={};g.cacheData=b,g.cacheKey=this.sCacheKey,g.msgType=a,!this.oCallbacks[a]&&(this.oCallbacks[a]=[]),c&&this.oCallbacks[a].push(c),2==this.bIsInitMsg?(d=document.getElementById(f),d.contentWindow.postMessage(JSON.stringify(g),"http://"+e.sDomain)):this.bIsInitMsg||(this.bIsInitMsg=1,d=document.createElement("IFRAME"),d.id="cacheProxyIfr",d.src=this.sProxyUrl,d.style.cssText="height:0px;width:0px;visibility:hidden",document.body.appendChild(d),d.onload=function(){e.bIsInitMsg=2,d.contentWindow.postMessage(JSON.stringify(g),"http://"+e.sDomain)},window.addEventListener("message",function(a){try{if(a.origin!="http://"+e.sDomain)return;var b=JSON.parse(a.data),c=b.msgType,d=e.oCallbacks[c];if(d){e.oCallbacks[c]=[];for(var f=0;f<d.length;f++)d[f].call(e,b.cacheData||{update:1})}}catch(g){}}))},get:function(a,b){var c=this;if(location.host!==this.sDomain)this.postMessage("get",null,b);else if(window.localStorage)try{var d=JSON.parse(localStorage.getItem(a)||(c.isAnroid?c.getCookie(a):"null"));d||(d={update:1}),b&&b.call(c,d)}catch(e){localStorage.removeItem(a)}return this},set:function(a){var b=(new Date).getTime(),c=this;return this.get(this.sCacheKey,function(e){var f=e.arrHisData;f||(f=[]),a.time=b;for(var g in d.oItemStruct)a[g]||(a[g]=d.oItemStruct[g]);for(var h=0;h<f.length;h++){var i=f[h];if(a.key===i.key)return a.url||(a.url=a.key),f[h]=a,e.arrHisData=f,d.writeHistory(e,1),c}a.url||(a.url=a.key),f.unshift(a),e.arrHisData=f,d.writeHistory(e,1)}),this},writeHistory:function(a,b,c){var e={};try{if(!a.arrHisData&&(a.arrHisData=[]),a.arrHisData.sort(function(a,b){return a.time>b.time?-1:a.time<b.time?1:0}),a.arrHisData=a.arrHisData.slice(0,window.storageHistoryRecordMaxNum||20),a.update=b||0,this.isAnroid){for(var f in a)e[f]=a[f];e.arrHisData=e.arrHisData.slice(0,2),this.setCookie(this.sCacheKey,"",-1,"","jd.com")}location.host!==this.sDomain?this.postMessage("set",a,c):window.localStorage&&(localStorage.setItem(d.sCacheKey,JSON.stringify(a)),c&&c.call(this))}catch(g){}return this},check:function(a){this.setCookie(this.sCacheKey,"",-1,"","jd.com");var b=(new Date).getTime(),c=600,e="undefined"!=typeof JD&&JD.url.getUrlParam("isappinstalled")||"",f=this;this.get(this.sCacheKey,function(g){try{var h=g.arrHisData;if(location.href.indexOf("ptype=")>-1&&1===history.length&&h&&h.length>0&&0!=g.update&&1!=window.hideHis&&!e){var i=h[0],j=i.time,k=(b-j)/1e3;c>k&&a&&a.call(f,k,i)}}catch(l){}return 0!=g.update?d.writeHistory(g,0,function(){d.ready()}):d.ready(),this})},ready:function(){window.wgStorage=d,window.wgStorageReady&&window.wgStorageReady(d)},getCookie:function(a){var b=new RegExp("(^| )"+a+"(?:=([^;]*))?(;|$)"),c=document.cookie.match(b);return c?c[2]?unescape(c[2]):"":null},setCookie:function(a,b,c,d,e,f){var g=new Date,c=arguments[2]||null,d=arguments[3]||"/",e=arguments[4]||null,f=arguments[5]||!1;c?g.setMinutes(g.getMinutes()+parseInt(c)):"",document.cookie=a+"="+escape(b)+(c?";expires="+g.toGMTString():"")+(d?";path="+d:"")+(e?";domain="+e:"")+(f?";secure":"")}};a()}();